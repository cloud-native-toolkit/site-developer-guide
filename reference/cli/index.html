<!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The Cloud-Native Toolkit is an open-source collection of assets that enable application development and support teams to deliver business value quickly using Red Hat OpenShift or Kubernetes"><meta name=author content="Cloud-Native Toolkit development team"><link href=https://cloudnativetoolkit.dev/reference/cli/ rel=canonical><link rel=icon href=../../images/cloudnativetoolkit.png><meta name=generator content="mkdocs-1.2.1, mkdocs-material-7.1.8"><title>Command Line Tool - Cloud Native Toolkit</title><link rel=stylesheet href=../../assets/stylesheets/main.ca7ac06f.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.f1a3b89f.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,400,400i,700%7CIBM+Plex+Mono&display=fallback"><style>:root{--md-text-font-family:"IBM Plex Sans";--md-code-font-family:"IBM Plex Mono"}</style><link rel=stylesheet href=../../css/extra.css><link rel=stylesheet href=../../css/toolkit-code.css><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-153689700-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:title content="Cloud Native Toolkit - Command Line Tool"><meta property=og:description content="The Cloud-Native Toolkit is an open-source collection of assets that enable application development and support teams to deliver business value quickly using Red Hat OpenShift or Kubernetes"><meta content=https://cloudnativetoolkit.dev/reference/cli/ property=og:url><meta property=og:image content=https://cloudnativetoolkit.dev/assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent> <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#cloud-native-toolkit-command-line-interface class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Cloud Native Toolkit" class="md-header__button md-logo" aria-label="Cloud Native Toolkit" data-md-component=logo> <img src=../../images/cloudnativetoolkit.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Cloud Native Toolkit </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Command Line Tool </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/cloud-native-toolkit/developer-guide/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine class according to configuration --> <!-- Main navigation --> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <!-- Site title --> <!--
  <label class="md-nav__title" for="__drawer">
    <a
      href="../.."
      title="Cloud Native Toolkit"
      class="md-nav__button md-logo"
      aria-label="Cloud Native Toolkit"
      data-md-component="logo"
    >
      
  <img src="../../images/cloudnativetoolkit.png" alt="logo">

    </a>
    Cloud Native Toolkit
  </label>
--> <!-- Repository information --> <div class=md-nav__source> <a href=https://github.com/cloud-native-toolkit/developer-guide/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> <!-- Render item list --> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Overview <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Overview data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Overview </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview/overview/ class=md-nav__link> What is the Cloud Native Toolkit </a> </li> <li class=md-nav__item> <a href=../../overview/whats-new/ class=md-nav__link> What's New </a> </li> <li class=md-nav__item> <a href=../../overview/prerequisites/ class=md-nav__link> Prerequisites </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Install <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Install data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Install </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../setup/setup-options/ class=md-nav__link> Options for installing up Toolkit </a> </li> <li class=md-nav__item> <a href=../../setup/fast-start/ class=md-nav__link> Fast Start install </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Learning the Toolkit <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Learning the Toolkit" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Learning the Toolkit </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1 type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1> Try it <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Try it" data-md-level=2> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Try it </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../resources/workshop/workshop/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../resources/workshop/setup/ class=md-nav__link> Setup Cluster </a> </li> <li class=md-nav__item> <a href=../../resources/workshop/terminal/ class=md-nav__link> Setup Terminal </a> </li> <li class=md-nav__item> <a href=../../resources/workshop/ci/ class=md-nav__link> Continuous integration </a> </li> <li class=md-nav__item> <a href=../../resources/workshop/cd/ class=md-nav__link> Continuous delivery </a> </li> <li class=md-nav__item> <a href=../../resources/workshop/inventory/ class=md-nav__link> 3-tier application </a> </li> <li class=md-nav__item> <a href=../../resources/workshop/appmod/ class=md-nav__link> Application modernization </a> </li> <li class=md-nav__item> <a href=../../resources/workshop/ai/ class=md-nav__link> Artificial Intelligence </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Basics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Basics data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Basics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../learning/fast-start/ class=md-nav__link> Learning Overview </a> </li> <li class=md-nav__item> <a href=../../learning/dev-setup/ class=md-nav__link> Developer setup </a> </li> <li class=md-nav__item> <a href=../../learning/fast-ci/ class=md-nav__link> Continuous Integration </a> </li> <li class=md-nav__item> <a href=../../learning/fast-cd/ class=md-nav__link> Continuous Delivery </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> In Depth <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="In Depth" data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> In Depth </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../learning/in-depth/ class=md-nav__link> Cloud-Native Development with the Toolkit </a> </li> <li class=md-nav__item> <a href=../../learning/devops/ class=md-nav__link> DevOps </a> </li> <li class=md-nav__item> <a href=../../learning/testing/ class=md-nav__link> Automated Testing </a> </li> <li class=md-nav__item> <a href=../../learning/analysis/ class=md-nav__link> Static Analysis </a> </li> <li class=md-nav__item> <a href=../../learning/pipeline/ class=md-nav__link> Pipeline </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Adopting the Toolkit <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Adopting the Toolkit" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Adopting the Toolkit </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../adopting/adopting/ class=md-nav__link> Adopting the Toolkit </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2> Best Practices <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Best Practices" data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Best Practices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../adopting/best-practices/best-practices/ class=md-nav__link> Best Practices </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2_2 type=checkbox id=__nav_5_2_2> <label class=md-nav__link for=__nav_5_2_2> IBM Cloud setup <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Cloud setup" data-md-level=3> <label class=md-nav__title for=__nav_5_2_2> <span class="md-nav__icon md-icon"></span> IBM Cloud setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../adopting/best-practices/ibm-cloud-account/ibm-cloud-setup/ class=md-nav__link> IBM Cloud setup </a> </li> <li class=md-nav__item> <a href=../../adopting/best-practices/ibm-cloud-account/plan-installation/ class=md-nav__link> Installation planning </a> </li> <li class=md-nav__item> <a href=../../adopting/best-practices/ibm-cloud-account/configure-account/ class=md-nav__link> Access control </a> </li> <li class=md-nav__item> <a href=../../adopting/best-practices/ibm-cloud-account/monitoring-logs/ class=md-nav__link> Monitoring and Logs </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../adopting/best-practices/registry/ class=md-nav__link> Container Registry </a> </li> <li class=md-nav__item> <a href=../../adopting/best-practices/infrastructure-as-code/ class=md-nav__link> Infrastructure as Code </a> </li> <li class=md-nav__item> <a href=../../adopting/best-practices/devops/ class=md-nav__link> DevOps </a> </li> <li class=md-nav__item> <a href=../../adopting/best-practices/secret-management/ class=md-nav__link> Secret management </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_3 type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3> Advanced setup options <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Advanced setup options" data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Advanced setup options </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../adopting/setup/installing/ class=md-nav__link> Installation options </a> </li> <li class=md-nav__item> <a href=../../adopting/setup/ibmcloud-setup/ class=md-nav__link> Configuring IBM Cloud based setup </a> </li> <li class=md-nav__item> <a href=../../adopting/setup/ibmcloud-tile-cluster/ class=md-nav__link> Install IBM Cloud cluster from catalog </a> </li> <li class=md-nav__item> <a href=../../adopting/setup/ibmcloud-iz-cluster/ class=md-nav__link> Install IBM Cloud cluster Iteration Zero </a> </li> <li class=md-nav__item> <a href=../../adopting/setup/provision-cluster/ class=md-nav__link> Install cluster elsewhere </a> </li> <li class=md-nav__item> <a href=../../adopting/setup/install-crc/ class=md-nav__link> Install CodeReady Containers </a> </li> <li class=md-nav__item> <a href=../../adopting/setup/air-gapped-setup/ class=md-nav__link> Air-gapped setup </a> </li> <li class=md-nav__item> <a href=../../adopting/setup/toolkit-install/ class=md-nav__link> Install toolkit to existing cluster </a> </li> <li class=md-nav__item> <a href=../../adopting/setup/configureEnvironment/ class=md-nav__link> Post Install steps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_4 type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4> Customizing the Toolkit <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Customizing the Toolkit" data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Customizing the Toolkit </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../adopting/customize/customize/ class=md-nav__link> Customization overview </a> </li> <li class=md-nav__item> <a href=../../adopting/customize/config-dashboard/dashboard/ class=md-nav__link> Customizing the dashboard </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5 type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5> Toolkit administration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Toolkit administration" data-md-level=2> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Toolkit administration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../adopting/admin/artifactory-setup/ class=md-nav__link> Artifactory setup </a> </li> <li class=md-nav__item> <a href=../../adopting/admin/argo-cd-setup/ class=md-nav__link> Argo CD setup </a> </li> <li class=md-nav__item> <a href=../../adopting/admin/sysdig-setup/ class=md-nav__link> Sysdig setup </a> </li> <li class=md-nav__item> <a href=../../adopting/admin/cluster-config/ class=md-nav__link> cluster configuration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_6 type=checkbox id=__nav_5_6> <label class=md-nav__link for=__nav_5_6> Use Cases <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Use Cases" data-md-level=2> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> Use Cases </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../adopting/use-cases/applying/ class=md-nav__link> User cases </a> </li> <li class=md-nav__item> <a href=../../adopting/use-cases/add-use-case/ class=md-nav__link> Add a new use case </a> </li> <li class=md-nav__item> <a href=../../adopting/use-cases/operator/operator/ class=md-nav__link> Build an Operator </a> </li> <li class=md-nav__item> <a href=../../adopting/use-cases/ace-pipeline/ace-pipeline/ class=md-nav__link> App Connect REST API workflow </a> </li> <li class=md-nav__item> <a href=../../adopting/use-cases/gitops/gitops-toolkit/ class=md-nav__link> GitOps with Toolkit </a> </li> <li class=md-nav__item> <a href=../../adopting/use-cases/gitops/gitops-ace/ class=md-nav__link> GitOps with App Connect </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6> Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Reference data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../reference/ class=md-nav__link> Reference </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Command Line Tool <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Command Line Tool </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#invoking-the-cli class=md-nav__link> Invoking the CLI </a> <nav class=md-nav aria-label="Invoking the CLI"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prerequisite-tools class=md-nav__link> Prerequisite tools </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#available-commands class=md-nav__link> Available commands </a> <nav class=md-nav aria-label="Available commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dashboard class=md-nav__link> dashboard </a> </li> <li class=md-nav__item> <a href=#console class=md-nav__link> console </a> </li> <li class=md-nav__item> <a href=#git class=md-nav__link> git </a> </li> <li class=md-nav__item> <a href=#credentials class=md-nav__link> credentials </a> </li> <li class=md-nav__item> <a href=#endpoints class=md-nav__link> endpoints </a> </li> <li class=md-nav__item> <a href=#sync class=md-nav__link> sync </a> </li> <li class=md-nav__item> <a href=#pull-secret class=md-nav__link> pull-secret </a> </li> <li class=md-nav__item> <a href=#pipeline class=md-nav__link> pipeline </a> </li> <li class=md-nav__item> <a href=#enable class=md-nav__link> enable </a> </li> <li class=md-nav__item> <a href=#git-secret class=md-nav__link> git-secret </a> </li> <li class=md-nav__item> <a href=#gitops class=md-nav__link> gitops </a> </li> <li class=md-nav__item> <a href=#tool-config class=md-nav__link> tool-config </a> </li> <li class=md-nav__item> <a href=#vlan class=md-nav__link> vlan </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../dashboard/ class=md-nav__link> Developer Dashboard </a> </li> <li class=md-nav__item> <a href=../git/ class=md-nav__link> Git repositories </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_5 type=checkbox id=__nav_6_5> <label class=md-nav__link for=__nav_6_5> Starter Kits <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Starter Kits" data-md-level=2> <label class=md-nav__title for=__nav_6_5> <span class="md-nav__icon md-icon"></span> Starter Kits </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../starter-kit/starter-kit/ class=md-nav__link> Starter Kit overview </a> </li> <li class=md-nav__item> <a href=../starter-kit/starter-kits/ class=md-nav__link> Available Starter Kits </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_6 type=checkbox id=__nav_6_6> <label class=md-nav__link for=__nav_6_6> Toolkit Components <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Toolkit Components" data-md-level=2> <label class=md-nav__title for=__nav_6_6> <span class="md-nav__icon md-icon"></span> Toolkit Components </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../tools/tools/ class=md-nav__link> Toolkit components </a> </li> <li class=md-nav__item> <a href=../tools/argocd/ class=md-nav__link> ArgoCD </a> </li> <li class=md-nav__item> <a href=../tools/artifactory/ class=md-nav__link> Artifactory </a> </li> <li class=md-nav__item> <a href=../tools/jenkins/ class=md-nav__link> Jenkins </a> </li> <li class=md-nav__item> <a href=../tools/pact/ class=md-nav__link> PACT </a> </li> <li class=md-nav__item> <a href=../tools/sonar-qube/ class=md-nav__link> SonarQube </a> </li> <li class=md-nav__item> <a href=../tools/tekton/ class=md-nav__link> OpenShift Pipelines/Tekton </a> </li> <li class=md-nav__item> <a href=../tools/ibm-cloud-container-registry/ class=md-nav__link> IBM Container Registry </a> </li> <li class=md-nav__item> <a href=../tools/key-protect/ class=md-nav__link> IBM Key Protect </a> </li> <li class=md-nav__item> <a href=../tools/container-image-security-enforcement/ class=md-nav__link> Container Image Security Enforcement </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_7 type=checkbox id=__nav_6_7> <label class=md-nav__link for=__nav_6_7> Pipeline Task Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Pipeline Task Reference" data-md-level=2> <label class=md-nav__title for=__nav_6_7> <span class="md-nav__icon md-icon"></span> Pipeline Task Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../tasks/pipelines/ class=md-nav__link> Pipelines </a> </li> <li class=md-nav__item> <a href=../tasks/placeholder/ class=md-nav__link> placeholder </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_8 type=checkbox id=__nav_6_8> <label class=md-nav__link for=__nav_6_8> Iteration Zero <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Iteration Zero" data-md-level=2> <label class=md-nav__title for=__nav_6_8> <span class="md-nav__icon md-icon"></span> Iteration Zero </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../iteration-zero/iteration-zero/ class=md-nav__link> Iteration Zero </a> </li> <li class=md-nav__item> <a href=../iteration-zero/terraform/ class=md-nav__link> Terraform modules </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Resources <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Resources data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../resources/resources/ class=md-nav__link> Additional resources </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7_2 type=checkbox id=__nav_7_2> <label class=md-nav__link for=__nav_7_2> IBM Cloud <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Cloud" data-md-level=2> <label class=md-nav__title for=__nav_7_2> <span class="md-nav__icon md-icon"></span> IBM Cloud </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../resources/ibm-cloud/ibm-cloud-roles/ class=md-nav__link> IBM Cloud roles </a> </li> <li class=md-nav__item> <a href=../../resources/ibm-cloud/access-control/ class=md-nav__link> Access control </a> </li> <li class=md-nav__item> <a href=../../resources/ibm-cloud/icc/ class=md-nav__link> ICC tool </a> </li> <li class=md-nav__item> <a href=../../resources/ibm-cloud/cloud-shell/ class=md-nav__link> Cloud shell </a> </li> <li class=md-nav__item> <a href=../../resources/ibm-cloud/crw/ class=md-nav__link> CodeReady Workspaces </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Contributing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Contributing data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Contributing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../contribute/governance/ class=md-nav__link> Governance </a> </li> <li class=md-nav__item> <a href=../../contribute/contribute/ class=md-nav__link> Contribute </a> </li> <li class=md-nav__item> <a href=../../contribute/documentation/ class=md-nav__link> Documentation </a> </li> <li class=md-nav__item> <a href=../../contribute/automation/ class=md-nav__link> Build Automation </a> </li> <li class=md-nav__item> <a href=../../contribute/migration/ class=md-nav__link> Site Migration </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#invoking-the-cli class=md-nav__link> Invoking the CLI </a> <nav class=md-nav aria-label="Invoking the CLI"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prerequisite-tools class=md-nav__link> Prerequisite tools </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#available-commands class=md-nav__link> Available commands </a> <nav class=md-nav aria-label="Available commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dashboard class=md-nav__link> dashboard </a> </li> <li class=md-nav__item> <a href=#console class=md-nav__link> console </a> </li> <li class=md-nav__item> <a href=#git class=md-nav__link> git </a> </li> <li class=md-nav__item> <a href=#credentials class=md-nav__link> credentials </a> </li> <li class=md-nav__item> <a href=#endpoints class=md-nav__link> endpoints </a> </li> <li class=md-nav__item> <a href=#sync class=md-nav__link> sync </a> </li> <li class=md-nav__item> <a href=#pull-secret class=md-nav__link> pull-secret </a> </li> <li class=md-nav__item> <a href=#pipeline class=md-nav__link> pipeline </a> </li> <li class=md-nav__item> <a href=#enable class=md-nav__link> enable </a> </li> <li class=md-nav__item> <a href=#git-secret class=md-nav__link> git-secret </a> </li> <li class=md-nav__item> <a href=#gitops class=md-nav__link> gitops </a> </li> <li class=md-nav__item> <a href=#tool-config class=md-nav__link> tool-config </a> </li> <li class=md-nav__item> <a href=#vlan class=md-nav__link> vlan </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/cloud-native-toolkit/developer-guide/edit/main/docs/reference/cli.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=cloud-native-toolkit-command-line-interface>Cloud Native Toolkit - Command Line Interface<a class=headerlink href=#cloud-native-toolkit-command-line-interface title="Permanent link">&para;</a></h1> <!--- cSpell:ignore myapp gituser gitpat gitsecret buildconfig prereq --> <h2 id=invoking-the-cli>Invoking the CLI<a class=headerlink href=#invoking-the-cli title="Permanent link">&para;</a></h2> <p>When the <a href=../../learning/dev-setup/#install-the-cloud-native-toolkit-command-line-interface-cli>CLI is installed</a>, it adds an executable named <code>igc</code> to the PATH. Running <code>igc --help</code> will list the available commands. The output text will be similar to the following:</p> <div class=highlight><pre><span></span><code>$ igc --help
IBM Garage Cloud Native Toolkit CLI (https://cloudnativetoolkit.dev)

Usage: igc &lt;command&gt; [args]

Commands:
  igc console                  Launch the IKS or OpenShift admin console
  igc create-webhook           Create a git webhook for a given Jenkins pipeline
  igc credentials              Lists the urls and credentials for the tools
                               deployed to the cluster
  igc dashboard                Open the Developer Dashboard in the default
                               browser
  igc enable                   Enable the current repository with pipeline logic
  igc endpoints                List the current ingress hosts for deployed apps
                               in a namespace
                                         [aliases: ingress, endpoint, ingresses]
  igc git-secret [name]        Create a kubernetes secret that contains the url,
                               username, and personal access token for a git
                               repo
  igc git [remote]             Launches a browser to the git repo url specified
                               by the remote. If not provided remote defaults to
                               origin
  igc gitops                   Registers the git repository in the kubernetes
                               cluster as the gitops repository for the given
                               namespace
  igc sync [namespace]         Create a namespace (if it does not exist) and
                               prepare it with the necessary configuration
                                                   [aliases: project, namespace]
  igc pull-secret [namespace]  Copy pull secrets into the provided project from
                               the template namespace
  igc pipeline [gitUrl]        Register a pipeline for the current code
                               repository
  igc tool-config [name]       Create the config map and secret for a tool
                               configured in the environment
  igc vlan                     Print out the vlan values
  igc yq &lt;command&gt;             lightweight yaml command-line processor that
                               addresses deficiencies with the existing `yq`
                               command

Options:
  --version  Show version number                                       [boolean]
  --help     Show help                                                 [boolean]
</code></pre></div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>As of v0.5.1, the Toolkit CLI will now install the commands as <a class=external href=https://kubernetes.io/docs/tasks/extend-kubectl/kubectl-plugins/ target=_blank>plugins</a> to the <code>kubectl</code> and <code>oc</code> CLIs. For example, all of the following are equivalent:</p> <div class=highlight><pre><span></span><code>igc pipeline
kubectl pipeline
oc pipeline
</code></pre></div> </div> <h3 id=prerequisite-tools>Prerequisite tools<a class=headerlink href=#prerequisite-tools title="Permanent link">&para;</a></h3> <p>Some of the commands provided by the Toolkit CLI orchestrate interactions between other CLIs. To get started please install the <a href=../../learning/dev-setup/ target=_blank>prerequisite tools</a>, in particular:</p> <ul> <li>The Kubernetes CLI</li> <li>The Red Hat OpenShift CLI</li> <li>The IBM Cloud CLI - used to interact with IBM Cloud vlans (not needed if tools will not run on IBM Cloud)</li> </ul> <h2 id=available-commands>Available commands<a class=headerlink href=#available-commands title="Permanent link">&para;</a></h2> <h3 id=dashboard>dashboard<a class=headerlink href=#dashboard title="Permanent link">&para;</a></h3> <p>Opens the <a href=../dashboard/ >Developer Dashboard</a> in the default browser. If a default browser has not been configured, then the URL to the Dashboard will be printed out.</p> <p>The dashboard displays the Cloud-Native Toolkit tools configured within the cluster along with links to activation content and links to Starter Kits to start a project quickly.</p> <p>This command requires that the login context for the cluster has already been established.</p> <h4 id=command-flags>Command flags<a class=headerlink href=#command-flags title="Permanent link">&para;</a></h4> <ul> <li><code>-n</code>: the namespace where the dashboard has been deployed; the default is <code>tools</code></li> </ul> <h4 id=usage>Usage<a class=headerlink href=#usage title="Permanent link">&para;</a></h4> <div class=tabbed-set data-tabs=1:3><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>CLI</label><div class=tabbed-content> <p>The command is used in the following way:</p> <div class=highlight><pre><span></span><code>igc dashboard
</code></pre></div> </div> <input id=__tabbed_1_2 name=__tabbed_1 type=radio><label for=__tabbed_1_2>OpenShift</label><div class=tabbed-content> <p>The following commands would have the same result on OpenShift:</p> <div class=highlight><pre><span></span><code><span class=nv>HOST</span><span class=o>=</span><span class=k>$(</span>oc get routes/dashboard -n tools -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.spec.host}&#39;</span><span class=k>)</span>
open <span class=s2>&quot;https://</span><span class=nv>$HOST</span><span class=s2>&quot;</span>
</code></pre></div> </div> <input id=__tabbed_1_3 name=__tabbed_1 type=radio><label for=__tabbed_1_3>Kubernetes</label><div class=tabbed-content></div> </div> <p>The following commands would have the same result on Kubernetes:</p> <div class=highlight><pre><span></span><code><span class=nv>HOST</span><span class=o>=</span><span class=k>$(</span>kubectl get ingress/developer-dashboard -n tools -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.spec.rules[0].host}&#39;</span><span class=k>)</span>
open <span class=s2>&quot;https://</span><span class=nv>$HOST</span><span class=s2>&quot;</span>
</code></pre></div> <h4 id=related-commands>Related commands<a class=headerlink href=#related-commands title="Permanent link">&para;</a></h4> <ul> <li><a href=#credentials>credentials</a>: shows information about the same tools shown in the dashboard from the command-line</li> <li><a href=#tool-config>tool-config</a>: allows configuration for additional tools to be added to the cluster, making them available to the dashboard and <code>credentials</code> command</li> </ul> <h3 id=console>console<a class=headerlink href=#console title="Permanent link">&para;</a></h3> <p>Opens the <em>IKS or OpenShift admin console</em> in the default browser. If a default browser has not been configured, then the URL to the console will be printed out.</p> <p>This command requires that the login context for the cluster has already been established.</p> <h4 id=usage_1>Usage<a class=headerlink href=#usage_1 title="Permanent link">&para;</a></h4> <div class=tabbed-set data-tabs=2:3><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><label for=__tabbed_2_1>CLI</label><div class=tabbed-content> <p>The command is used in the following way:</p> <div class=highlight><pre><span></span><code>igc console
</code></pre></div> </div> <input id=__tabbed_2_2 name=__tabbed_2 type=radio><label for=__tabbed_2_2>OpenShift</label><div class=tabbed-content> <p>The following commands would have the same result on OpenShift:</p> <div class=highlight><pre><span></span><code>open <span class=k>$(</span>oc whoami --show-console<span class=k>)</span>
</code></pre></div> </div> <input id=__tabbed_2_3 name=__tabbed_2 type=radio><label for=__tabbed_2_3>Kubernetes</label><div class=tabbed-content> <p>The following commands would have the same result on Kubernetes:</p> <div class=highlight><pre><span></span><code><span class=nv>REGION</span><span class=o>=</span><span class=s2>&quot;...&quot;</span>
<span class=nv>CLUSTER_NAME</span><span class=o>=</span><span class=s2>&quot;...&quot;</span>
<span class=nv>CLUSTER_ID</span><span class=o>=</span><span class=k>$(</span>ibmcloud ks cluster get --cluster <span class=si>${</span><span class=nv>CLUSTER_NAME</span><span class=si>}</span> <span class=p>|</span> grep -E <span class=s2>&quot;^ID&quot;</span> <span class=p>|</span> sed -E <span class=s2>&quot;s/ID: +([^ ]+)/\\1/g&quot;</span><span class=k>)</span>
open <span class=s2>&quot;https://</span><span class=si>${</span><span class=nv>REGION</span><span class=si>}</span><span class=s2>.containers.cloud.ibm.com/kubeproxy/clusters/</span><span class=si>${</span><span class=nv>CLUSTER_ID</span><span class=si>}</span><span class=s2>/service/#/overview?namespace=default&quot;</span>
</code></pre></div> </div> </div> <h4 id=related-commands_1>Related commands<a class=headerlink href=#related-commands_1 title="Permanent link">&para;</a></h4> <ul> <li><a href=#credentials>credentials</a>: shows information about the same tools shown in the dashboard from the command-line</li> <li><a href=#tool-config>tool-config</a>: allows configuration for additional tools to be added to the cluster, making them available to the dashboard and <code>credentials</code> command</li> </ul> <h3 id=git>git<a class=headerlink href=#git title="Permanent link">&para;</a></h3> <p>Opens the Git repo in the default browser for the current working directory. If a default browser has not been configured, then the URL to the repo will be printed out.</p> <h4 id=usage_2>Usage<a class=headerlink href=#usage_2 title="Permanent link">&para;</a></h4> <div class=tabbed-set data-tabs=3:2><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><label for=__tabbed_3_1>CLI</label><div class=tabbed-content> <p>The command is used in the following way:</p> <div class=highlight><pre><span></span><code>igc git
</code></pre></div> <p>If you have multiple remotes and would like to open one other than <code>origin</code>:</p> <div class=highlight><pre><span></span><code>igc git origin-fork
</code></pre></div> </div> <input id=__tabbed_3_2 name=__tabbed_3 type=radio><label for=__tabbed_3_2>Manual</label><div class=tabbed-content> <p>The following commands would have the same result with shell commands:</p> <div class=highlight><pre><span></span><code><span class=nb>alias</span> <span class=nv>gh</span><span class=o>=</span><span class=s2>&quot;open https://github.</span><span class=k>$(</span>git config remote.origin.url <span class=p>|</span> cut -f2 -d. <span class=p>|</span> tr <span class=s1>&#39;:&#39;</span> /<span class=k>)</span><span class=s2>&quot;</span>
</code></pre></div> </div> </div> <h4 id=related-commands_2>Related commands<a class=headerlink href=#related-commands_2 title="Permanent link">&para;</a></h4> <ul> <li><a href=#credentials>credentials</a>: shows information about the same tools shown in the dashboard from the command-line</li> <li><a href=#tool-config>tool-config</a>: allows configuration for additional tools to be added to the cluster, making them available to the dashboard and <code>credentials</code> command</li> </ul> <h3 id=credentials>credentials<a class=headerlink href=#credentials title="Permanent link">&para;</a></h3> <p>Lists the endpoints, user names, and passwords for the tools configured in the environment. This is the easiest way to get the login credentials for each of the installed tools. Ideally all of the tools would be accessible via SSO at which point this command will be obsolete.</p> <p>The command works by reading information available in the cluster. When each tool is installed by the toolkit, a <code>config map</code> and <code>secret</code> are created to store the url and credential for the tool. That information is used in a number of different ways within the environment:</p> <ul> <li>Provide configuration information to the pipelines</li> <li>Populate the tiles on the <a href=../dashboard/ target=_blank>Developer Dashboard</a></li> <li>Populate the results of the <code>credentials</code> command</li> </ul> <p>This command requires that the login context for the cluster has already been established.</p> <h4 id=command-flags_1>Command flags<a class=headerlink href=#command-flags_1 title="Permanent link">&para;</a></h4> <ul> <li><code>-n</code>: the namespace where the tools have been deployed; the default is <code>tools</code></li> </ul> <h4 id=usage_3>Usage<a class=headerlink href=#usage_3 title="Permanent link">&para;</a></h4> <div class=tabbed-set data-tabs=4:2><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><label for=__tabbed_4_1>CLI</label><div class=tabbed-content> <p>The command is used in the following way:</p> <div class=highlight><pre><span></span><code>igc credentials
</code></pre></div> <p>The credential output is JSON format like this</p> <div class=highlight><pre><span></span><code>Credentials:  <span class=o>{</span>
  argocd: <span class=o>{</span>
    user: <span class=s1>&#39;admin&#39;</span>,
    password: <span class=s1>&#39;12345678&#39;</span>,
    url: <span class=s1>&#39;https://argocd-tools.mycluster.us-east.containers.appdomain.cloud&#39;</span>
  <span class=o>}</span>,
  . . .
  dashboard: <span class=o>{</span>
    url: <span class=s1>&#39;https://dashboard-tools.mycluster.us-east.containers.appdomain.cloud&#39;</span>
  <span class=o>}</span>,
  . . .
<span class=o>}</span>
</code></pre></div> </div> <input id=__tabbed_4_2 name=__tabbed_4 type=radio><label for=__tabbed_4_2>OpenShift or Kubernetes</label><div class=tabbed-content> <p>The following commands have the same result (note the dependency on <code>jq</code>):</p> <div class=highlight><pre><span></span><code><span class=c1># config maps</span>
kubectl get configmap -n tools -l <span class=nv>grouping</span><span class=o>=</span>garage-cloud-native-toolkit -o json <span class=p>|</span> <span class=se>\</span>
  jq <span class=s1>&#39;[.items[] | select(.metadata.name != &quot;ibmcloud-config&quot;).data]&#39;</span>

<span class=c1># secrets</span>
kubectl get secret -n tools -l <span class=nv>grouping</span><span class=o>=</span>garage-cloud-native-toolkit -o json <span class=p>|</span> <span class=se>\</span>
  jq <span class=s1>&#39;[.items[] | select(.metadata.name != &quot;ibmcloud-apikey&quot;).data | with_entries(.value |= @base64d)]&#39;</span>
</code></pre></div> </div> </div> <h4 id=related-commands_3>Related commands<a class=headerlink href=#related-commands_3 title="Permanent link">&para;</a></h4> <ul> <li><a href=#dashboard>dashboard</a>: displays the url of the Developer Dashboard and launches the default browser</li> <li><a href=#tool-config>tool-config</a>: allows configuration for additional tools to be added to the cluster, making them available to the dashboard and <code>credentials</code> command</li> </ul> <h3 id=endpoints>endpoints<a class=headerlink href=#endpoints title="Permanent link">&para;</a></h3> <p>Lists the ingress and/or route URLs for the applications in a given namespace. An attempt will be made to get the namespace from the current context if one is not provided as an argument. Results of the command are provided in an interactive menu. If one of the endpoints is selected, it will display the URL and launch it in the default browser. Selecting <code>Exit</code> will print the full list of endpoints and exit.</p> <p>This command requires that the login context for the cluster has already been established.</p> <h4 id=command-flags_2>Command flags<a class=headerlink href=#command-flags_2 title="Permanent link">&para;</a></h4> <ul> <li><code>-n</code>: the namespace from which the endpoints will be read; the value will be read from the current context if not provided</li> </ul> <h4 id=usage_4>Usage<a class=headerlink href=#usage_4 title="Permanent link">&para;</a></h4> <div class=tabbed-set data-tabs=5:3><input checked=checked id=__tabbed_5_1 name=__tabbed_5 type=radio><label for=__tabbed_5_1>CLI</label><div class=tabbed-content> <p>The command is used in the following way:</p> <div class=highlight><pre><span></span><code>igc endpoints
</code></pre></div> </div> <input id=__tabbed_5_2 name=__tabbed_5 type=radio><label for=__tabbed_5_2>OpenShift</label><div class=tabbed-content> <p>The following commands list the route and ingress endpoints:</p> <div class=highlight><pre><span></span><code><span class=c1># routes</span>
kubectl get route -n tools

<span class=c1># ingress</span>
kubectl get ingress -n tools
</code></pre></div> </div> <input id=__tabbed_5_3 name=__tabbed_5 type=radio><label for=__tabbed_5_3>Kubernetes</label><div class=tabbed-content> <p>The following commands list the ingress endpoints:</p> <div class=highlight><pre><span></span><code>kubectl get ingress -n tools
</code></pre></div> </div> </div> <h3 id=sync>sync<a class=headerlink href=#sync title="Permanent link">&para;</a></h3> <p>Creates a Kubernetes namespace or OpenShift project (if it doesn't already exist) and sets it up so that the namespace can be used as a target for application deployments and/or to host the environment.</p> <p>The command synchronize the <code>ConfigMaps</code> and <code>Secrets</code> from a template namespace (ie <code>tools</code>) to create a "development" namespace. After the command has run successfully it will set the provided namespace in the current context (e.g. equivalent to <code>oc project X</code>)</p> <p>This command copies the relevant <code>ConfigMaps</code> and <code>Secrets</code> into the namespace that are needed for development activities. Managing resources across namespaces (particularly <code>ConfigMaps</code> and <code>Secrets</code>) is a common challenge in Kubernetes environments. We have provided the command at this time to simplify the steps required to get everything ready. Ultimately, this problem seems like an ideal one for an Operator to solve and when one is available (either from the Toolkit or elsewhere) this command will be retired or transitioned.</p> <p>The command will setup the "development" namespace where DevOps pipelines can be run (e.g. myapp-dev)</p> <p>The "development" namespace will have the <code>ConfigMaps</code> and <code>Secrets</code> copied over.</p> <div class=highlight><pre><span></span><code>Positionals:
  namespace  The namespace that will be created and/or prepared

Options:
      --version            Show version number                         [boolean]
      --help               Show help                                   [boolean]
  -t, --templateNamespace  the template namespace that will be the source of the
                           config                    [string] [default: &quot;tools&quot;]
  -z, --serviceAccount     the service account that will be used within the
                           namespace               [string] [default: &quot;default&quot;]
      --verbose            flag to produce more verbose logging        [boolean]
</code></pre></div> <h4 id=usage_5>Usage<a class=headerlink href=#usage_5 title="Permanent link">&para;</a></h4> <div class=tabbed-set data-tabs=6:4><input checked=checked id=__tabbed_6_1 name=__tabbed_6 type=radio><label for=__tabbed_6_1>CLI</label><div class=tabbed-content> <p>Create a <code>dev</code> namespace for development</p> <div class=highlight><pre><span></span><code>igc sync myapp-dev
</code></pre></div> </div> <input id=__tabbed_6_2 name=__tabbed_6 type=radio><label for=__tabbed_6_2>OpenShift</label><div class=tabbed-content> <p>Create a <code>dev</code> namespace for development</p> <div class=highlight><pre><span></span><code>oc sync myapp-dev
</code></pre></div> </div> <input id=__tabbed_6_3 name=__tabbed_6 type=radio><label for=__tabbed_6_3>Kubernetes</label><div class=tabbed-content> <p>Create a <code>dev</code> namespace for development</p> <div class=highlight><pre><span></span><code>kubectl sync myapp-dev
</code></pre></div> </div> <input id=__tabbed_6_4 name=__tabbed_6 type=radio><label for=__tabbed_6_4>Manual ConfigMap and Secret setup</label><div class=tabbed-content> <p>The following steps will copy the <code>ConfigMaps</code> and <code>Secrets</code> from a template namespace to a target namespace:</p> <div class=highlight><pre><span></span><code>  <span class=nb>export</span> <span class=nv>TEMPLATE_NAMESPACE</span><span class=o>=</span><span class=s2>&quot;tools&quot;</span>
  <span class=nb>export</span> <span class=nv>NAMESPACE</span><span class=o>=</span><span class=s2>&quot;NAMESPACE&quot;</span>

  kubectl get configmap -l <span class=nv>group</span><span class=o>=</span>catalyst-tools -n <span class=si>${</span><span class=nv>TEMPLATE_NAMESPACE</span><span class=si>}</span> -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{ range .items[*] }{ .metadata.name }{ &quot;\n&quot; }{ end }&#39;</span> <span class=p>|</span> <span class=se>\</span>
    <span class=k>while</span> <span class=nb>read</span> cm<span class=p>;</span> <span class=k>do</span>
      kubectl get configmap <span class=si>${</span><span class=nv>cm</span><span class=si>}</span> --namespace <span class=si>${</span><span class=nv>TEMPLATE_NAMESPACE</span><span class=si>}</span> --export -o yaml <span class=p>|</span> <span class=se>\</span>
        kubectl apply --namespace <span class=nv>$NAMESPACE</span> -f -
    <span class=k>done</span>

  kubectl get secret -l <span class=nv>group</span><span class=o>=</span>catalyst-tools -n <span class=si>${</span><span class=nv>TEMPLATE_NAMESPACE</span><span class=si>}</span> -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{ range .items[*] }{ .metadata.name }{ &quot;\n&quot; }{ end }&#39;</span> <span class=p>|</span> <span class=se>\</span>
    <span class=k>while</span> <span class=nb>read</span> cm<span class=p>;</span> <span class=k>do</span>
      kubectl get secret <span class=si>${</span><span class=nv>cm</span><span class=si>}</span> --namespace <span class=si>${</span><span class=nv>TEMPLATE_NAMESPACE</span><span class=si>}</span> --export -o yaml <span class=p>|</span> <span class=se>\</span>
        kubectl apply --namespace <span class=nv>$NAMESPACE</span> -f -
    <span class=k>done</span>
</code></pre></div> </div> </div> <h3 id=pull-secret>pull-secret<a class=headerlink href=#pull-secret title="Permanent link">&para;</a></h3> <p>Copy pull secrets into the provided project from the template namespace for the IBM Container Registry.</p> <p>Set up a service account in the namespace with the pull secret(s) for the IBM Container Registry that are copied.</p> <p>The pull secret(s) are required in order for pods to pull images that are stored in the IBM Container Registry. When the cluster is created in IBM Cloud, a pull secret is provided in the <code>default</code> namespace. In order for a pod in another namespace to use it, the secret must first be copied into the namespace. After that, the pod either needs to reference the pull secret directly or the service account used by the resource needs to have a reference to the secret. The CLI copies the pull secret over and adds it to the service account so the pod can take either approach.</p> <p>This command should be use to set up "release" namespaces where applications can be deployed (e.g. test, staging)</p> <div class=highlight><pre><span></span><code>Positionals:
  namespace  The namespace into which the pull-secret(s) will be created

Options:
      --version            Show version number                         [boolean]
      --help               Show help                                   [boolean]
  -t, --templateNamespace  the template namespace that will be the source of the
                           config                    [string] [default: &quot;tools&quot;]
  -z, --serviceAccount     the service account that will be used within the
                           namespace               [string] [default: &quot;default&quot;]
      --dev                flag to indicate this is a development namespace and
                           that development artifacts should be created[boolean]
      --verbose            flag to produce more verbose logging        [boolean]
</code></pre></div> <h4 id=usage_6>Usage<a class=headerlink href=#usage_6 title="Permanent link">&para;</a></h4> <div class=tabbed-set data-tabs=7:2><input checked=checked id=__tabbed_7_1 name=__tabbed_7 type=radio><label for=__tabbed_7_1>CLI</label><div class=tabbed-content> <p>Copy the pull secret from <code>default</code> namespace into <code>myapp-test</code> namespace and add to serviceAccount <code>default</code></p> <div class=highlight><pre><span></span><code>igc pull-secret myapp-test -t default -z default
</code></pre></div> </div> <input id=__tabbed_7_2 name=__tabbed_7 type=radio><label for=__tabbed_7_2>Manual pull secret setup</label><div class=tabbed-content> <p>The following commands will copy the pull secret(s) from the <code>default</code> namespace and add them to the service account:</p> <div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>NAMESPACE</span><span class=o>=</span><span class=s2>&quot;myapp-test&quot;</span>
<span class=nb>export</span> <span class=nv>SERVICE_ACCOUNT</span><span class=o>=</span><span class=s2>&quot;default&quot;</span>

<span class=k>if</span> <span class=o>[[</span> <span class=k>$(</span>kubectl get secrets -n <span class=s2>&quot;</span><span class=si>${</span><span class=nv>NAMESPACE</span><span class=si>}</span><span class=s2>&quot;</span> -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{ range .items[*] }{ .metadata.name }{ &quot;\n&quot; }{ end }&#39;</span> <span class=p>|</span> grep icr <span class=p>|</span> wc -l <span class=p>|</span> xargs<span class=k>)</span> -eq <span class=m>0</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
    <span class=nb>echo</span> <span class=s2>&quot;*** Copying pull secrets from default namespace to </span><span class=si>${</span><span class=nv>NAMESPACE</span><span class=si>}</span><span class=s2> namespace&quot;</span>

    kubectl get secrets -n default <span class=p>|</span> grep icr <span class=p>|</span> sed <span class=s2>&quot;s/\([A-Za-z-]*\) *.*/\1/g&quot;</span> <span class=p>|</span> <span class=k>while</span> <span class=nb>read</span> default_secret<span class=p>;</span> <span class=k>do</span>
        kubectl get secret <span class=si>${</span><span class=nv>default_secret</span><span class=si>}</span> -n default -o yaml --export <span class=p>|</span> sed <span class=s2>&quot;s/name: default-/name: /g&quot;</span> <span class=p>|</span> kubectl -n <span class=si>${</span><span class=nv>NAMESPACE</span><span class=si>}</span> create -f -
    <span class=k>done</span>
<span class=k>else</span>
    <span class=nb>echo</span> <span class=s2>&quot;*** Pull secrets already exist on </span><span class=si>${</span><span class=nv>NAMESPACE</span><span class=si>}</span><span class=s2> namespace&quot;</span>
<span class=k>fi</span>


<span class=nv>EXISTING_SECRETS</span><span class=o>=</span><span class=k>$(</span>kubectl get serviceaccount/<span class=si>${</span><span class=nv>SERVICE_ACCOUNT</span><span class=si>}</span> -n <span class=s2>&quot;</span><span class=si>${</span><span class=nv>NAMESPACE</span><span class=si>}</span><span class=s2>&quot;</span> -o json  <span class=p>|</span> tr <span class=s1>&#39;\n&#39;</span> <span class=s1>&#39; &#39;</span> <span class=p>|</span> sed -E <span class=s2>&quot;s/.*imagePullSecrets.: \[([^]]*)\].*/\1/g&quot;</span> <span class=p>|</span> grep icr <span class=p>|</span> wc -l <span class=p>|</span> xargs<span class=k>)</span>
<span class=k>if</span> <span class=o>[[</span> <span class=si>${</span><span class=nv>EXISTING_SECRETS</span><span class=si>}</span> -eq <span class=m>0</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
    <span class=nb>echo</span> <span class=s2>&quot;*** Adding secrets to serviceaccount/</span><span class=si>${</span><span class=nv>SERVICE_ACCOUNT</span><span class=si>}</span><span class=s2> in </span><span class=si>${</span><span class=nv>NAMESPACE</span><span class=si>}</span><span class=s2> namespace&quot;</span>

    <span class=nv>PULL_SECRETS</span><span class=o>=</span><span class=k>$(</span>kubectl get secrets -n <span class=s2>&quot;</span><span class=si>${</span><span class=nv>NAMESPACE</span><span class=si>}</span><span class=s2>&quot;</span> -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{ range .items[*] }{ &quot;{\&quot;name\&quot;: \&quot;&quot;}{ .metadata.name }{ &quot;\&quot;}\n&quot; }{ end }&#39;</span> <span class=p>|</span> grep icr <span class=p>|</span> grep -v <span class=s2>&quot;</span><span class=si>${</span><span class=nv>NAMESPACE</span><span class=si>}</span><span class=s2>&quot;</span> <span class=p>|</span> paste -sd <span class=s2>&quot;,&quot;</span> -<span class=k>)</span>
    kubectl patch -n <span class=s2>&quot;</span><span class=si>${</span><span class=nv>NAMESPACE</span><span class=si>}</span><span class=s2>&quot;</span> serviceaccount/<span class=si>${</span><span class=nv>SERVICE_ACCOUNT</span><span class=si>}</span> -p <span class=s2>&quot;{\&quot;imagePullSecrets\&quot;: [</span><span class=si>${</span><span class=nv>PULL_SECRETS</span><span class=si>}</span><span class=s2>]}&quot;</span>
<span class=k>else</span>
    <span class=nb>echo</span> <span class=s2>&quot;*** Pull secrets already applied to serviceaccount/</span><span class=si>${</span><span class=nv>SERVICE_ACCOUNT</span><span class=si>}</span><span class=s2> in </span><span class=si>${</span><span class=nv>NAMESPACE</span><span class=si>}</span><span class=s2> namespace&quot;</span>
<span class=k>fi</span>
</code></pre></div> </div> </div> <h3 id=pipeline>pipeline<a class=headerlink href=#pipeline title="Permanent link">&para;</a></h3> <p>Connects a branch in a Git repo to a either a Jenkins or Tekton CI pipeline in the environment and triggers an initial build. A webhook is also created so that when a new commit is added to the branch, the pipeline is triggered to start the process to rebuild and redeploy the app using the new code. Currently, webhook creation is supported for repositories hosted on Gitlab, Github, Github Enterprise, Bitbucket, and Gogs.</p> <p>This command can either be used to register a git repository that has previously been cloned to the local filesystem <strong>OR</strong> using the remote repo url.</p> <h4 id=repository-location>Repository location<a class=headerlink href=#repository-location title="Permanent link">&para;</a></h4> <p>The <code>pipeline</code> command supports registering a CI pipeline for a repository that has been cloned locally or using the remote repository url.</p> <h5 id=local-repository>Local repository<a class=headerlink href=#local-repository title="Permanent link">&para;</a></h5> <p>If you are registering a local repository then you must run the command from within the directory of your local clone of the Git repo. When registering a local repository, the pipeline will use the branch that is currently checked out.</p> <h5 id=remote-repository>Remote repository<a class=headerlink href=#remote-repository title="Permanent link">&para;</a></h5> <p>To register a remote repository, pass the repo url as an argument to the <code>pipeline</code> command. For example:</p> <div class=highlight><pre><span></span><code>oc pipeline <span class=s2>&quot;https://github.com/my-org/my-repo&quot;</span>
</code></pre></div> <p>You can optionally provide the branch name with the url using a hash (<code>#</code>):</p> <div class=highlight><pre><span></span><code>oc pipeline <span class=s2>&quot;https://github.com/my-org/my-repo#my-branch&quot;</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>When registering a remote git repo, if the branch is not provided then the default branch will be used.</p> </div> <h4 id=pipeline-type>Pipeline type<a class=headerlink href=#pipeline-type title="Permanent link">&para;</a></h4> <p>The <code>pipeline</code> command supports registering pipelines with either Tekton or Jenkins. The pipeline can be specified from the command-line with either the <code>--tekton</code> or <code>--jenkins</code> flags. If a flag is not provided then you will be prompted to select the pipeline.</p> <h4 id=git-credentials>Git credentials<a class=headerlink href=#git-credentials title="Permanent link">&para;</a></h4> <p>The command will prompt for the username and password/personal access token to access the Git repository, unless those are already stored in a secret in the cluster namespace or provided as command-line parameters. The username and password can be provided with the <code>-u</code> and <code>-p</code> flags. If you want to change the credentials that have already been stored in the cluster namespace, the <code>-g</code> argument an be provided and you will be prompted for the credentials.</p> <h4 id=tekton-template-pipeline>Tekton template pipeline<a class=headerlink href=#tekton-template-pipeline title="Permanent link">&para;</a></h4> <p>If a Tekton pipeline will be used, a template pipeline must be selected for the new repository pipeline. The command reads the template pipelines available in the template namespace. The template namespace can be provided with the <code>-t</code> argument and will default to <code>tools</code> if not provided. The command will also filter the list of pipelines based on the runtime determined from the given repository.</p> <p>If there is more than one template pipeline available then you will be prompted to pick one. The template pipeline can also be provided on the command-line using the <code>--pipeline</code> argument. If the name doesn't match an available pipeline then you will be prompted to select one.</p> <h4 id=pipeline-parameters>Pipeline parameters<a class=headerlink href=#pipeline-parameters title="Permanent link">&para;</a></h4> <p>Once the pipeline template is selected, you will be prompted to provide values for the defined pipeline parameters. The values can also be provided from the command-line using the <code>-p</code> argument. The name of the parameter is listed at the beginning of the prompt message. Multiple parameters can be provided by repeating the <code>-p</code> argument. For example:</p> <div class=highlight><pre><span></span><code>oc pipeline --tekton <span class=s2>&quot;https://github.com/my-org/my-repo&quot;</span> -p scan-image<span class=o>=</span><span class=nb>false</span> -p <span class=nv>edge</span><span class=o>=</span><span class=nb>false</span>
</code></pre></div> <h4 id=optional-arguments>Optional arguments<a class=headerlink href=#optional-arguments title="Permanent link">&para;</a></h4> <ul> <li><code>-u</code>: the username for accessing the Git repo</li> <li><code>-P</code>: the password or personal access token for accessing the Git repo</li> <li><code>-g</code>: ignore existing <code>git-credentials</code> secret and prompt to update the values</li> <li><code>-p</code>: provide parameters for the pipeline</li> <li><code>--jenkins</code>: deploy using a Jenkins pipeline</li> <li><code>--tekton</code>: deploy using a Tekton pipeline</li> <li><code>--pipeline</code>: the name of the Tekton pipeline</li> <li><code>-n</code>: the deployment namespace; if not provided the namespace from the current context will be used</li> <li><code>-t</code>: the template namespace; if not provided the value will default to <code>tools</code></li> </ul> <div class="admonition info"> <p class=admonition-title>Usage</p> <div class=tabbed-set data-tabs=8:4><input checked=checked id=__tabbed_8_1 name=__tabbed_8 type=radio><label for=__tabbed_8_1>CLI</label><div class=tabbed-content> <p>Create a Jenkins pipeline in the current namespace and prompt for the Git credentials</p> <div class=highlight><pre><span></span><code>oc pipeline --jenkins
</code></pre></div> <p>Create a Tekton pipeline in the <code>my-dev</code> namespace, using the Git credentials <code>gituser</code> and <code>gitpat</code></p> <div class=highlight><pre><span></span><code>oc pipeline -n my-dev -u gituser -P gitpat --tekton
</code></pre></div> </div> <input id=__tabbed_8_2 name=__tabbed_8 type=radio><label for=__tabbed_8_2>Manual Steps for Tekton</label><div class=tabbed-content> <p>The following is the list of steps required to manually configure a <strong>Tekton</strong> pipeline with your development cluster.</p> <ol> <li> <p>Set the current namespace/project</p> <div class=tabbed-set data-tabs=9:2><input checked=checked id=__tabbed_9_1 name=__tabbed_9 type=radio><label for=__tabbed_9_1>OpenShift</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>oc project <span class=o>{</span>namespace<span class=o>}</span>
</code></pre></div> </div> <input id=__tabbed_9_2 name=__tabbed_9 type=radio><label for=__tabbed_9_2>Kubernetes</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>kubectl config set-context --current --namespace<span class=o>={</span>namespace<span class=o>}</span>
</code></pre></div> </div> </div> </li> <li> <p>Copy the tasks from the <code>tools</code> namespace into the current namespace <div class=highlight><pre><span></span><code>kubectl get tasks -o json -n tools <span class=p>|</span> <span class=se>\</span>
  jq <span class=s1>&#39;del(.items[].metadata.uid) | del(.items[].metadata.selfLink) | del(.items[].metadata.resourceVersion) | del(.items[].metadata.namespace) | del(.items[].metadata.creationTimestamp) | del(.items[].metadata.generation) | del(.items[].metadata.annotations.&quot;kubectl.kubernetes.io/last-applied-configuration&quot;)&#39;</span> <span class=p>|</span> <span class=se>\</span>
  kubectl apply -f -
</code></pre></div></p> </li> <li> <p>List the available pipeline templates in the <code>tools</code> namespace and select the one to use for your project. <div class=highlight><pre><span></span><code>kubectl get pipelines -n tools
</code></pre></div></p> </li> <li> <p>Clone the selected pipeline from the <code>tools</code> namespace into the current namespace <div class=highlight><pre><span></span><code>kubectl get pipeline <span class=si>${</span><span class=nv>TEMPLATE_NAME</span><span class=si>}</span> -o json -n tools <span class=p>|</span> <span class=se>\</span>
  jq --arg PIPELINE_NAME <span class=si>${</span><span class=nv>PIPELINE_NAME</span><span class=si>}</span> <span class=s1>&#39;.metadata.name = $PIPELINE_NAME | del(.metadata.uid) | del(.metadata.selfLink) | del(.metadata.resourceVersion) | del(.metadata.namespace) | del(.metadata.creationTimestamp) | del(.metadata.generation) | del(.metadata.annotations.&quot;kubectl.kubernetes.io/last-applied-configuration&quot;)&#39;</span> <span class=p>|</span> <span class=se>\</span>
  kubectl apply -f -
</code></pre></div></p> <p>where: - <code>TEMPLATE_NAME</code> is the name of the pipeline selected in the previous step - <code>PIPELINE_NAME</code> is the name of the pipeline for your project</p> </li> </ol> <h4 id=start-the-pipeline>Start the pipeline<a class=headerlink href=#start-the-pipeline title="Permanent link">&para;</a></h4> <p>The Tekton pipeline does not automatically start when it is first created. After the webhook is created in the subsequent steps the pipeline will start when changes are pushed to the repository but before that, we can manually trigger the build to start using the CLI. (The pipeline can also be started through the OpenShift Console.)</p> <ul> <li> <p>Kick off the pipeline using the Tekton CLI</p> <div class=highlight><pre><span></span><code>tkn pipeline start <span class=o>{</span>PIPELINE_NAME<span class=o>}</span> -s pipeline -p git-url<span class=o>={</span>GIT_REPO<span class=o>}</span> -p git-revision<span class=o>={</span>GIT_BRANCH<span class=o>}</span>
</code></pre></div> </li> <li> <p>To create a new PipelineRun with the same parameters from a previous PipelineRun you can do the following</p> <div class=highlight><pre><span></span><code>tkn pipeline start <span class=o>{</span>PIPELINE_NAME<span class=o>}</span> --use-pipelinerun <span class=o>{</span>PIPELINE_RUN_NAME<span class=o>}</span>
</code></pre></div> </li> </ul> <h4 id=create-a-git-webhook>Create a Git Webhook**<a class=headerlink href=#create-a-git-webhook title="Permanent link">&para;</a></h4> <h5 id=create-the-event-listener-and-triggers>Create the event listener and triggers<a class=headerlink href=#create-the-event-listener-and-triggers title="Permanent link">&para;</a></h5> <p>In order for a Tekton pipeline to be triggered by a webhook notification, several resources need to be created:</p> <ul> <li><code>TriggerTemplate</code> - defines how to create the PipelineRun and any other required resources when a webhook notification is received.</li> <li><code>TriggerBinding</code> - provides a mapping for the information available in the webhook payload into the TriggerTemplate</li> <li> <p><code>EventListener</code> - makes the connection between the Pipeline, TriggerBinding, and TriggerTemplate together that will be created when a webhook is triggered</p> </li> <li> <p>Create a file named <code>tekton-trigger.yaml</code> and paste in the following contents:</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">triggers.tekton.dev/v1alpha1</span>
<span class=nt>kind</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">TriggerTemplate</span>
<span class=nt>metadata</span><span class=p>:</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>app</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>PIPELINE_NAME</span><span class="p p-Indicator">}</span>
  <span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>TRIGGER_TEMPLATE_NAME</span><span class="p p-Indicator">}</span>
<span class=nt>spec</span><span class=p>:</span>
  <span class=nt>params</span><span class=p>:</span>
  <span class="p p-Indicator">-</span> <span class=nt>description</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">The git revision</span>
    <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">gitrevision</span>
  <span class="p p-Indicator">-</span> <span class=nt>description</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">The git repository url</span>
    <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">gitrepositoryurl</span>
  <span class=nt>resourcetemplates</span><span class=p>:</span>
  <span class="p p-Indicator">-</span> <span class=nt>apiVersion</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">tekton.dev/v1beta1</span>
    <span class=nt>kind</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">PipelineRun</span>
    <span class=nt>metadata</span><span class=p>:</span>
      <span class=nt>generateName</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>PIPELINE_NAME</span><span class="p p-Indicator">}</span><span class=err>-</span>
    <span class=nt>spec</span><span class=p>:</span>
      <span class=nt>params</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">git-url</span>
        <span class=nt>value</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">$(params.gitrepositoryurl)</span>
      <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">git-revision</span>
        <span class=nt>value</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">$(params.gitrevision)</span>
      <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">scan-image</span>
        <span class=nt>value</span><span class=p>:</span> <span class=s>&quot;false&quot;</span>
      <span class=nt>pipelineRef</span><span class=p>:</span>
        <span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>PIPELINE_NAME</span><span class="p p-Indicator">}</span>
<span class=nn>---</span>
<span class=nt>apiVersion</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">triggers.tekton.dev/v1alpha1</span>
<span class=nt>kind</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">TriggerBinding</span>
<span class=nt>metadata</span><span class=p>:</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>app</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>PIPELINE_NAME</span><span class="p p-Indicator">}</span>
  <span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>TRIGGER_BINDING_NAME</span><span class="p p-Indicator">}</span>
<span class=nt>spec</span><span class=p>:</span>
  <span class=nt>params</span><span class=p>:</span>
  <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">gitrevision</span>
    <span class=nt>value</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">$(body.head_commit.id)</span>
  <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">gitrepositoryurl</span>
    <span class=nt>value</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">$(body.repository.url)</span>
<span class=nn>---</span>
<span class=nt>apiVersion</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">triggers.tekton.dev/v1alpha1</span>
<span class=nt>kind</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">EventListener</span>
<span class=nt>metadata</span><span class=p>:</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>app</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>PIPELINE_NAME</span><span class="p p-Indicator">}</span>
  <span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>EVENT_LISTENER_NAME</span><span class="p p-Indicator">}</span>
<span class=nt>spec</span><span class=p>:</span>
  <span class=nt>serviceAccountName</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">pipeline</span>
  <span class=nt>triggers</span><span class=p>:</span>
  <span class="p p-Indicator">-</span> <span class=nt>bindings</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>kind</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">TriggerBinding</span>
      <span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>TRIGGER_BINDING_NAME</span><span class="p p-Indicator">}</span>
    <span class=nt>interceptors</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>cel</span><span class=p>:</span>
        <span class=nt>filter</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">header.match(&#39;X-GitHub-Event&#39;, &#39;push&#39;) &amp;&amp; body.ref == &#39;refs/heads/{BRANCH_NAME}&#39;</span>
    <span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>PIPELINE_NAME</span><span class="p p-Indicator">}</span>
    <span class=nt>template</span><span class=p>:</span>
      <span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>TRIGGER_TEMPLATE_NAME</span><span class="p p-Indicator">}</span>
</code></pre></div> </li> <li> <p>Replace the place holder values with the appropriate values:</p> <p>where: - <code>{PIPELINE_NAME}</code> is the name of your Pipeline resource from the previous section. - <code>{TRIGGER_TEMPLATE_NAME}</code> is the name of the TriggerTemplate. This can be the same as the <code>{PIPELINE_NAME}</code>. - <code>{TRIGGER_BINDING_NAME}</code> is the name of the TriggerBinding. This can be the same as the <code>{PIPELINE_NAME}</code>. - <code>{EVENT_LISTENER_NAME}</code> is the name of the EventListener. This can be <code>el-{PIPELINE_NAME}</code> if the EventListeners will be configured one-to-one with the Pipelines or the instance can be shared across the project. - <code>{BRANCH_NAME}</code> is the name of the branch from which webhook events should trigger the build to start</p> </li> <li> <p>Apply the trigger resources to the cluster, in the same namespace where the Pipeline was created</p> <div class=highlight><pre><span></span><code>kubectl apply -f tekton-trigger.yaml
</code></pre></div> </li> <li> <p>In order for the Git repository to trigger the build with a webhook, an endpoint needs to be available. Expose the EventListener service with a route to provide that endpoint.</p> <div class=highlight><pre><span></span><code>oc expose service <span class=si>${</span><span class=nv>EVENT_LISTENER_NAME</span><span class=si>}</span> --name<span class=o>=</span><span class=si>${</span><span class=nv>EVENT_LISTENER_NAME</span><span class=si>}</span>
</code></pre></div> </li> </ul> <h5 id=register-the-webhook-url-with-your-git-repository>Register the webhook url with your Git repository<a class=headerlink href=#register-the-webhook-url-with-your-git-repository title="Permanent link">&para;</a></h5> <p>The particular steps will vary to create the Webhook depending on the flavor of hosted Git you are using (GitHub, GitHub Enterprise, GitLab, BitBucket, etc) but the general flow will remain the same.</p> <ol> <li> <p>Get the host name for the route created in the previous step</p> <div class=highlight><pre><span></span><code>oc get route <span class=si>${</span><span class=nv>EVENT_LISTENER_NAME</span><span class=si>}</span> -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.spec.host}&#39;</span>
</code></pre></div> </li> <li> <p>Create a webhook in your hosted Git repository using the https url of the host name from the previous step that is triggered by the desired events (e.g. push, pull request, release)</p> </li> </ol> </div> <input id=__tabbed_8_3 name=__tabbed_8 type=radio><label for=__tabbed_8_3>Manual steps for Jenkins on OpenShift</label><div class=tabbed-content> <h4 id=provision-jenkins-ephemeral>Provision Jenkins ephemeral<a class=headerlink href=#provision-jenkins-ephemeral title="Permanent link">&para;</a></h4> <p>Jenkins ephemeral provides a kubernetes native version of Jenkins that dynamically provisions build agents on-demand. It's <em>ephemeral</em> meaning it doesn't allocate any persistent storage in the cluster.</p> <ol> <li> <p>Set the project/namespace</p> <div class=highlight><pre><span></span><code>oc project <span class=o>{</span>NAMESPACE<span class=o>}</span>
</code></pre></div> <p>where: - <code>{NAMESPACE}</code> is the development namespace where the pipelines will run</p> </li> <li> <p>Run the following command to provision the Jenkins instance in your namespace</p> <div class=highlight><pre><span></span><code>oc new-app jenkins-ephemeral
</code></pre></div> </li> <li> <p>Open the OpenShift console as described in the login steps above</p> </li> <li> <p>Select <code>Workloads -&gt; Pods</code> from the left-hand menu</p> </li> <li> <p>At the top of the page select your project/namespace from the drop-down list to see the Jenkins instance running</p> </li> </ol> <h4 id=give-the-jenkins-service-account-privileged-access>Give the <code>jenkins</code> service account <code>privileged</code> access<a class=headerlink href=#give-the-jenkins-service-account-privileged-access title="Permanent link">&para;</a></h4> <p>All of the Cloud-Native Toolkit pipelines use <code>buildah</code> to build and push the container image to the registry. Unfortunately, the <code>buildah</code> container must run as root. By default, OpenShift does not allow containers to run as the root user and special permission is required for the pipeline to run.</p> <p>With the Jenkins build engine, all the build processes run as the <code>jenkins</code> service account. In order for the pipeline container to run as root on OpenShift we will need to give the <code>privileged</code> security context constraint (scc) to <code>jenkins</code> service account with the following command:</p> <div class=highlight><pre><span></span><code>oc project <span class=o>{</span>NAMESPACE<span class=o>}</span>
oc adm policy add-scc-to-user privileged -z jenkins
</code></pre></div> <p>where: - <code>{NAMESPACE}</code> should be the name you claimed in the box note prefixed to <code>-dev</code> (e.g. user01-dev)</p> <h4 id=create-a-secret-with-git-credentials>Create a secret with git credentials<a class=headerlink href=#create-a-secret-with-git-credentials title="Permanent link">&para;</a></h4> <p>In order for Jenkins to have access to the git repository, particularly if it is a private repository, a Kubernetes secret needs to be added that contains the git credentials.</p> <ol> <li> <p>Create a personal access token (if you don't already have one) using the <a href=../../learning/dev-setup/#git-pat target=_blank>prereq instructions</a></p> </li> <li> <p>Copy the following into a file called <code>gitsecret.yaml</code> and update the {Git-Username}, and {Git-PAT}</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>kind</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class=nt>metadata</span><span class=p>:</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>build.openshift.io/source-secret-match-uri-1</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">https://github.com/*</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>jenkins.io/credentials-type</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">usernamePassword</span>
  <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">git-credentials</span>
<span class=nt>type</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">kubernetes.io/basic-auth</span>
<span class=nt>stringData</span><span class=p>:</span>
  <span class=nt>username</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>Git-Username</span><span class="p p-Indicator">}</span>
  <span class=nt>password</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>Git-PAT</span><span class="p p-Indicator">}</span>
</code></pre></div> <p>where: - <code>Git-Username</code> is the username that has access to the git repo - <code>Git-PAT</code> is the personal access token of the git user</p> </li> <li> <p>After logging into the cluster, create the secret by running the following:</p> <div class=highlight><pre><span></span><code>oc project <span class=o>{</span>NAMESPACE<span class=o>}</span>
oc create -f gitsecret.yaml
</code></pre></div> <p>where: - <code>{NAMESPACE}</code> is the development namespace where the pipelines will run</p> </li> </ol> <h4 id=create-the-build-config>Create the build config<a class=headerlink href=#create-the-build-config title="Permanent link">&para;</a></h4> <p>On OpenShift 4.3, Jenkins is built into the OpenShift console and the build pipelines can be managed using Kubernetes custom resources. The following steps will create one by hand to create the build pipeline for the new application.</p> <ol> <li> <p>Copy the following into a file called <code>buildconfig.yaml</code> and update the {Name}, {Secret}, {Git-Repo-URL}, and {Namespace}</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>kind</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">BuildConfig</span>
<span class=nt>metadata</span><span class=p>:</span>
  <span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>Name</span><span class="p p-Indicator">}</span>
<span class=nt>spec</span><span class=p>:</span>
  <span class=nt>triggers</span><span class=p>:</span>
  <span class="p p-Indicator">-</span> <span class=nt>type</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">GitHub</span>
    <span class=nt>github</span><span class=p>:</span>
      <span class=nt>secret</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">my-secret-value</span>
  <span class=nt>source</span><span class=p>:</span>
    <span class=nt>git</span><span class=p>:</span>
      <span class=nt>uri</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>Git-Repo-URL</span><span class="p p-Indicator">}</span>
      <span class=nt>ref</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">master</span>
  <span class=nt>strategy</span><span class=p>:</span>
    <span class=nt>jenkinsPipelineStrategy</span><span class=p>:</span>
      <span class=nt>jenkinsfilePath</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Jenkinsfile</span>
      <span class=nt>env</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">CLOUD_NAME</span>
        <span class=nt>value</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">openshift</span>
      <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">NAMESPACE</span>
        <span class=nt>value</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>NAMESPACE</span><span class="p p-Indicator">}</span>
</code></pre></div> <p>where: - <code>Name</code> is in the name of your pipeline - <code>Git-Repo-URL</code> is the https url to the git repository - <code>{NAMESPACE}</code> is the development namespace where the pipelines will run</p> </li> <li> <p>Assuming you are still logged into the cluster, create the buildconfig resource in the cluster</p> <div class=highlight><pre><span></span><code>oc project <span class=o>{</span>NAMESPACE<span class=o>}</span>
oc create -f buildconfig.yaml
</code></pre></div> <p>where: - <code>{NAMESPACE}</code> is the development namespace where the pipelines will run</p> </li> </ol> <h4 id=view-the-pipeline-in-the-openshift-console>View the pipeline in the OpenShift console<a class=headerlink href=#view-the-pipeline-in-the-openshift-console title="Permanent link">&para;</a></h4> <ol> <li>Open the OpenShift console for the cluster</li> <li>Select Builds -&gt; Build Config</li> <li>Select your project/namespace (i.e. <code>{NAMESPACE}</code>) from the top</li> <li>The build pipeline that was created in the previous step should appear</li> <li>Manually trigger the pipeline by selecting <code>Start Build</code> the menu button on the right side of the row</li> </ol> <h4 id=create-the-webhook>Create the webhook<a class=headerlink href=#create-the-webhook title="Permanent link">&para;</a></h4> <ol> <li> <p>Run the following to get the webhook details from the build config</p> <div class=highlight><pre><span></span><code>oc project <span class=o>{</span>NAMESPACE<span class=o>}</span>
oc describe bc <span class=o>{</span>Name<span class=o>}</span>
</code></pre></div> <p>where: - <code>{Name}</code> is the name used in the previous step for the build config - <code>{NAMESPACE}</code> is the development namespace where the pipelines will run</p> <p>The webhook url will have a structure similar to:</p> <p><code>http://{openshift_api_host:port}/oapi/v1/namespaces/{namespace}/buildconfigs/{name}/webhooks/{secret}/generic</code></p> <p>In this case <code>{secret}</code> will be <code>my-secret-value</code></p> </li> <li> <p>Open a browser to the GitHub repo deployed in the previous step in the build config</p> </li> <li> <p>Select <code>Settings</code> then <code>Webhooks</code>. Press <code>Add webhook</code></p> </li> <li> <p>Paste the webhook url from the previous step into the <code>Payload url</code></p> </li> <li> <p>Set the content-type to <code>application/json</code> and leave the rest of the values as the defaults</p> </li> <li> <p>Press <code>Add webhook</code> to create the webhook</p> </li> <li> <p>Press the button to test the webhook to ensure that everything was done properly</p> </li> <li> <p>Go back to your project code and push a change to one of the files</p> </li> <li> <p>Go to the Build pipeline page in the OpenShift console to see that the build was triggered</p> </li> </ol> </div> <input id=__tabbed_8_4 name=__tabbed_8 type=radio><label for=__tabbed_8_4>Manual steps for Jenkins on Kubernetes</label><div class=tabbed-content> <p>TBD</p> </div> </div> </div> <h3 id=enable>enable<a class=headerlink href=#enable title="Permanent link">&para;</a></h3> <p>Adds DevOps artifacts to a Git repo that the environment uses to deploy the app. The command displays a list of available pipelines and applies the one you select to your code repo. The DevOps files added to your repo include (but are not limited to):</p> <ul> <li>Helm chart</li> <li>Jenkinsfile</li> </ul> <p>This command DOES NOT require that the terminal is already logged in to an IBM Cloud account nor the cluster. It DOES require that the terminal's current directory is the repository directory for your local copy of the Git repo.</p> <p>The command will add files to the local repo. You should commit these new files and push them to the server repo. Then run <code>igc pipeline</code> to connect your repo to a pipeline in the environment.</p> <h4 id=command-flags_3>Command flags<a class=headerlink href=#command-flags_3 title="Permanent link">&para;</a></h4> <ul> <li><code>--repo</code>: the set of pipelines to choose from; the default is <code>https://github.com/ibm-garage-cloud/garage-pipelines</code></li> <li><code>-p</code>: the name of the pipeline that should be installed; if not provided then you will be prompted</li> <li><code>-b</code>: the branch from which the pipeline should be installed; the default is <code>stable</code></li> <li><code>r</code>: the version number of the pipeline that should be installed; the default is <code>latest</code></li> </ul> <h4 id=usage_7>Usage<a class=headerlink href=#usage_7 title="Permanent link">&para;</a></h4> <div class=tabbed-set data-tabs=10:2><input checked=checked id=__tabbed_10_1 name=__tabbed_10 type=radio><label for=__tabbed_10_1>CLI</label><div class=tabbed-content> <ol> <li> <p>Before running the command, make sure you have a clean repository with no unstaged changes. Either commit any changes or stash them temporarily with <code>git stash</code>. It is particularly important that any changes to the pipeline be dealt with.</p> </li> <li> <p>Apply the pipeline updates using the CLI command</p> <div class=highlight><pre><span></span><code>igc <span class=nb>enable</span>
</code></pre></div> </li> <li> <p>Review the changes using <code>git diff</code> and revert any application-specific changes that should remain (e.g. customization to the Jenkins pipeline in the <code>Jenkinsfile</code>, specific values added to <code>values.yaml</code>, customizations to the templates in the <code>helm chart</code>)</p> </li> <li> <p>Commit the changes when you are happy with them</p> </li> </ol> </div> <input id=__tabbed_10_2 name=__tabbed_10 type=radio><label for=__tabbed_10_2>Manual steps</label><div class=tabbed-content> <p>The follow provides the manual steps equivalent to the <code>igc enable</code> command:</p> <ol> <li> <p>Before updating the pipelines, make sure you have a clean repository with no unstaged changes. Either commit any changes or stash them temporarily with <code>git stash</code>. It is particularly important that any changes to the pipeline be dealt with.</p> </li> <li> <p>Download the <code>index.yaml</code> file containing the available pipeline versions</p> <div class=highlight><pre><span></span><code>curl -O https://ibm-garage-cloud.github.io/garage-pipelines/index.yaml
</code></pre></div> </li> <li> <p>Look through the <code>index.yaml</code> file to identify the url for the desired pipeline branch and version</p> </li> <li> <p>With the PIPELINE_URL from the previous step, run the following to download the pipeline tar-ball</p> <div class=highlight><pre><span></span><code>curl -O <span class=si>${</span><span class=nv>PIPELINE_URL</span><span class=si>}</span>
</code></pre></div> </li> <li> <p>Extract the tar-ball into your repository directory. You will be prompted to overwrite files. Overwrite as appropriate</p> <div class=highlight><pre><span></span><code>tar xzf <span class=si>${</span><span class=nv>PIPELINE_FILE</span><span class=si>}</span>
</code></pre></div> </li> <li> <p>Review the changes using <code>git diff</code> and revert any application-specific changes that should remain (e.g. customization to the Jenkins pipeline in the <code>Jenkinsfile</code>, specific values added to <code>values.yaml</code>, customizations to the templates in the <code>helm chart</code>)</p> </li> <li> <p>Commit the changes when you are happy with them</p> </li> </ol> </div> </div> <h3 id=git-secret>git-secret<a class=headerlink href=#git-secret title="Permanent link">&para;</a></h3> <p>Creates a kubernetes secret that contains the username and personal access token for a git repo and a config map that contains the url, host, org, repo, and branch for the git repository. The secret is always named <code>git-credentials</code> and the config map is named <code>{git org}.{git repo}</code>. The config map and secret will be created in the currently selected namespace/project, unless a value is passed with the <code>-n</code> flag. If the <code>git-credentials</code> secret already exists then it won't be replaced/updated it won't be updated unless the <code>--replace</code> argument is passed.</p> <h4 id=command-flags_4>Command flags<a class=headerlink href=#command-flags_4 title="Permanent link">&para;</a></h4> <ul> <li><code>[positional]</code>: overwrites the name of the config map</li> <li><code>-n</code>: the namespace where the secret and config map should be created. Defaults to the currently selected project/namespace</li> <li><code>-d</code>: the directory where the cloned repository is located. Defaults to the current working directory</li> <li><code>-u</code>: the username for the git secret, If not provided the value will be collected from a prompt</li> <li><code>-p</code>: the personal access token, If not provided the value will be collected from a prompt</li> <li><code>--values</code>: an optional yaml file that contains additional attributes to add to the secret</li> <li><code>--replace</code>: flag indicating that the secret should be replaced/updated if it already exists</li> </ul> <h4 id=usage_8>Usage<a class=headerlink href=#usage_8 title="Permanent link">&para;</a></h4> <p>==="CLI" The following gives an example of using the <code>git-secret</code> command to set up the config map and secret in the <code>dev</code> namespace</p> <div class=highlight><pre><span></span><code>```shell
igc git-secret -n dev
```
</code></pre></div> <div class=tabbed-set data-tabs=11:1><input checked=checked id=__tabbed_11_1 name=__tabbed_11 type=radio><label for=__tabbed_11_1>Manual</label><div class=tabbed-content> <p>The following gives the equivalent commands to create the config map and secret for a git repository in the <code>dev</code> namespace</p> <ol> <li> <p>Create the <code>git-credentials</code> secret</p> <div class=highlight><pre><span></span><code>kubectl create secret generic git-credentials -n dev <span class=se>\</span>
  --from-literal<span class=o>=</span><span class=nv>username</span><span class=o>={</span>git username<span class=o>}</span> <span class=se>\</span>
  --from-literal<span class=o>=</span><span class=nv>password</span><span class=o>={</span>git personal access token<span class=o>}</span> <span class=se>\</span>
  --dry-run --output<span class=o>=</span>yaml <span class=p>|</span> <span class=se>\</span>
kubectl label -f - --local --dry-run --output<span class=o>=</span>yaml <span class=se>\</span>
  <span class=s2>&quot;jenkins.io/credentials-type=usernamePassword&quot;</span> <span class=p>|</span> <span class=se>\</span>
kubectl annotate -f - --local --dry-run --output<span class=o>=</span>yaml <span class=se>\</span>
  <span class=s2>&quot;build.openshift.io/source-secret-match-uri-1=https://github.com/*&quot;</span> <span class=se>\</span>
  <span class=s2>&quot;tekton.dev/git-0=https://github.com&quot;</span> <span class=p>|</span> <span class=se>\</span>
kubectl apply -f -
</code></pre></div> </li> <li> <p>Create the config map for a git repo located at <code>https://github.com/showcase/myrepo</code></p> <div class=highlight><pre><span></span><code>kubectl create configmap showcase.myrepo -n dev <span class=se>\</span>
  --from-literal<span class=o>=</span><span class=nv>host</span><span class=o>=</span>github.com <span class=se>\</span>
  --from-literal<span class=o>=</span><span class=nv>org</span><span class=o>=</span>showcase <span class=se>\</span>
  --from-literal<span class=o>=</span><span class=nv>repo</span><span class=o>=</span>myrepo <span class=se>\</span>
  --from-literal<span class=o>=</span><span class=nv>url</span><span class=o>=</span>https://github.com/showcase/myrepo <span class=se>\</span>
  --from-literal<span class=o>=</span><span class=nv>branch</span><span class=o>=</span>master
</code></pre></div> </li> </ol> </div> </div> <h3 id=gitops>gitops<a class=headerlink href=#gitops title="Permanent link">&para;</a></h3> <p>Creates a kubernetes secret that contains the username and personal access token for a git repo and a config map that contains the url, host, org, repo, and branch for the git repository. The secret is always named <code>git-credentials</code> and the config map is named <code>gitops-repo</code>. The config map and secret will be created in the currently selected namespace/project, unless a value is passed with the <code>-n</code> flag. If the <code>git-credentials</code> secret already exists then it won't be replaced/updated unless the <code>--replace</code> argument is passed.</p> <h4 id=command-flags_5>Command flags<a class=headerlink href=#command-flags_5 title="Permanent link">&para;</a></h4> <ul> <li><code>-n</code>: the namespace where the secret and config map should be created. Defaults to the currently selected project/namespace</li> <li><code>-d</code>: the directory where the cloned repository is located. Defaults to the current working directory</li> <li><code>-u</code>: the username for the git secret, If not provided the value will be collected from a prompt</li> <li><code>-p</code>: the personal access token, If not provided the value will be collected from a prompt</li> <li><code>--values</code>: an optional yaml file that contains additional attributes to add to the secret</li> <li><code>--replace</code>: flag indicating that the secret should be replaced/updated if it already exists</li> </ul> <h4 id=usage_9>Usage<a class=headerlink href=#usage_9 title="Permanent link">&para;</a></h4> <div class=tabbed-set data-tabs=12:2><input checked=checked id=__tabbed_12_1 name=__tabbed_12 type=radio><label for=__tabbed_12_1>CLI</label><div class=tabbed-content> <p>The following gives an example of using the <code>gitops</code> command to set up the config map and secret in the <code>dev</code> namespace</p> <div class=highlight><pre><span></span><code>igc gitops -n dev
</code></pre></div> </div> <input id=__tabbed_12_2 name=__tabbed_12 type=radio><label for=__tabbed_12_2>Manual</label><div class=tabbed-content> <p>The following gives the equivalent commands to create the config map and secret for a git repository in the <code>dev</code> namespace</p> <ol> <li> <p>Create the <code>git-credentials</code> secret</p> <div class=highlight><pre><span></span><code>kubectl create secret generic git-credentials -n dev <span class=se>\</span>
  --from-literal<span class=o>=</span><span class=nv>username</span><span class=o>={</span>git username<span class=o>}</span> <span class=se>\</span>
  --from-literal<span class=o>=</span><span class=nv>password</span><span class=o>={</span>git personal access token<span class=o>}</span> <span class=se>\</span>
  --dry-run --output<span class=o>=</span>yaml <span class=p>|</span> <span class=se>\</span>
kubectl label -f - --local --dry-run --output<span class=o>=</span>yaml <span class=se>\</span>
  <span class=s2>&quot;jenkins.io/credentials-type=usernamePassword&quot;</span> <span class=p>|</span> <span class=se>\</span>
kubectl annotate -f - --local --dry-run --output<span class=o>=</span>yaml <span class=se>\</span>
  <span class=s2>&quot;build.openshift.io/source-secret-match-uri-1=https://github.com/*&quot;</span> <span class=se>\</span>
  <span class=s2>&quot;tekton.dev/git-0=https://github.com&quot;</span> <span class=p>|</span> <span class=se>\</span>
kubectl apply -f -
</code></pre></div> </li> <li> <p>Create the config map for a git repo located at <code>https://github.com/showcase/myrepo</code></p> <div class=highlight><pre><span></span><code>kubectl create configmap github-repo -n dev <span class=se>\</span>
  --from-literal<span class=o>=</span><span class=nv>host</span><span class=o>=</span>github.com <span class=se>\</span>
  --from-literal<span class=o>=</span><span class=nv>org</span><span class=o>=</span>showcase <span class=se>\</span>
  --from-literal<span class=o>=</span><span class=nv>repo</span><span class=o>=</span>myrepo <span class=se>\</span>
  --from-literal<span class=o>=</span><span class=nv>url</span><span class=o>=</span>https://github.com/showcase/myrepo <span class=se>\</span>
  --from-literal<span class=o>=</span><span class=nv>branch</span><span class=o>=</span>master
</code></pre></div> </li> </ol> </div> </div> <h3 id=tool-config>tool-config<a class=headerlink href=#tool-config title="Permanent link">&para;</a></h3> <p>Configures a new tool in the environment. After deploying the tool, use this command to add the tool to the list of credentials so that it will be displayed in the dashboard.</p> <h4 id=command-flags_6>Command flags<a class=headerlink href=#command-flags_6 title="Permanent link">&para;</a></h4> <ul> <li>The name for the tool</li> <li><code>-n</code>: the tools namespace; the default is <code>tools</code></li> <li><code>--url</code>: the endpoint for accessing the tool, usually its dashboard</li> <li><code>--username</code>: (optional) the user name for logging into to tool</li> <li><code>--password</code>: (optional) the password for logging into to tool</li> </ul> <h4 id=usage_10>Usage<a class=headerlink href=#usage_10 title="Permanent link">&para;</a></h4> <div class=tabbed-set data-tabs=13:2><input checked=checked id=__tabbed_13_1 name=__tabbed_13 type=radio><label for=__tabbed_13_1>CLI</label><div class=tabbed-content> <p>The following gives an example of using the <code>tool-config</code> command to set up a tool named <code>my-tool</code> with its dashboard's endpoint and credentials</p> <div class=highlight><pre><span></span><code>igc tool-config my-tool <span class=se>\</span>
  --url https://mytool-dashboard.mycluster.us-east.containers.appdomain.cloud <span class=se>\</span>
  --username admin <span class=se>\</span>
  --password password
</code></pre></div> </div> <input id=__tabbed_13_2 name=__tabbed_13 type=radio><label for=__tabbed_13_2>Manual install with helm</label><div class=tabbed-content> <p>The following gives an example of using helm directly to do the equivalent (using helm 3):</p> <div class=highlight><pre><span></span><code>helm install my-tool tool-config <span class=se>\</span>
  --repo https://ibm-garage-cloud.github.io/toolkit-charts/ <span class=se>\</span>
  --set <span class=nv>url</span><span class=o>=</span>https://mytool-dashboard.mycluster.us-east.containers.appdomain.cloud <span class=se>\</span>
  --set <span class=nv>username</span><span class=o>=</span>admin <span class=se>\</span>
  --set <span class=nv>password</span><span class=o>=</span>password
</code></pre></div> </div> </div> <h3 id=vlan>vlan<a class=headerlink href=#vlan title="Permanent link">&para;</a></h3> <p>Lists the VLANs for a particular IBM Cloud region. This information is useful for preparing Terraform cluster creation steps. The command reads all the data centers in the region and allows you to select the appropriate data center for the vlan.</p> <p>This command requires that the terminal is already logged in to the cloud region. It does NOT need to be logged in to a cluster.</p> <h4 id=usage_11>Usage<a class=headerlink href=#usage_11 title="Permanent link">&para;</a></h4> <div class=tabbed-set data-tabs=14:2><input checked=checked id=__tabbed_14_1 name=__tabbed_14 type=radio><label for=__tabbed_14_1>CLI</label><div class=tabbed-content> <p>List a pair of public/private VLANs for a new environment to use</p> <div class=highlight><pre><span></span><code>igc vlan
</code></pre></div> </div> <input id=__tabbed_14_2 name=__tabbed_14 type=radio><label for=__tabbed_14_2>Manual steps</label><div class=tabbed-content> <ol> <li> <p>List the zones for the region</p> <div class=highlight><pre><span></span><code>ibmcloud ks zones --region-only --provider classic
</code></pre></div> </li> <li> <p>Select the desired zone from the listing provided by the previous command and run the following to list the vlans for that zone</p> <div class=highlight><pre><span></span><code>ibmcloud ks vlans --zone <span class=si>${</span><span class=nv>zone</span><span class=si>}</span>
</code></pre></div> </li> </ol> </div> </div> </article> </div> </div> </main> <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class=md-footer> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-column> <div class=md-footer-text><a href=https://cloudnativetoolkit.dev/contribute/contribute.html>Contribute</a> to the Cloud-Native Toolkit</div> <div class=md-footer-text>Site licensed under <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ >CC BY-NC-SA 4.0</a></div> </div> <div class=md-footer-column> <div class=md-footer-text>Have questions? open an issue on <a href=https://github.com/cloud-native-toolkit/planning/issues/new/choose>GitHub</a>.</div> <!-- Copyright and theme information --> <div class=md-footer-text> Copyright  2021 Cloud-Native Toolkit </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.instant", "navigation.tracking"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.b0710199.min.js", "version": null}</script> <script src=../../assets/javascripts/bundle.76f349be.min.js></script> </body> </html>