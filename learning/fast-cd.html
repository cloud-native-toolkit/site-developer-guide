<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The Cloud-Native Toolkit is an open-source collection of assets that enable application development and support teams to deliver business value quickly using Red Hat OpenShift or Kubernetes"><meta name=author content="Cloud-Native Toolkit development team"><link rel=canonical href=https://cloudnativetoolkit.dev/learning/fast-cd.html><link rel=icon href=../images/cloudnativetoolkit.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-7.1.5"><title>Continuous Delivery - Cloud Native Toolkit</title><link rel=stylesheet href=../assets/stylesheets/main.bde7dde4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.ef6f36e2.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,400,400i,700%7CIBM+Plex+Mono&display=fallback"><style>:root{--md-text-font-family:"IBM Plex Sans";--md-code-font-family:"IBM Plex Mono"}</style><link rel=stylesheet href=../css/extra.css><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-153689700-1","cloudnativetoolkit.dev"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent> <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#continuous-delivery-fast-start class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Cloud Native Toolkit" class="md-header__button md-logo" aria-label="Cloud Native Toolkit" data-md-component=logo> <img src=../images/cloudnativetoolkit.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Cloud Native Toolkit </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Continuous Delivery </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/cloud-native-toolkit/ibm-garage-developer-guide/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> cloud-native-toolkit/ibm-garage-developer-guide </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../index.html class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../overview/overview.html class=md-tabs__link> Overview </a> </li> <li class=md-tabs__item> <a href=../setup/setup-options.html class=md-tabs__link> Install </a> </li> <li class=md-tabs__item> <a href=../resources/workshop/workshop.html class="md-tabs__link md-tabs__link--active"> Learning the Toolkit </a> </li> <li class=md-tabs__item> <a href=../adopting/adopting.html class=md-tabs__link> Adopting the Toolkit </a> </li> <li class=md-tabs__item> <a href=../reference/reference.html class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../resources/resources.html class=md-tabs__link> Resources </a> </li> <li class=md-tabs__item> <a href=../contribute/governance.html class=md-tabs__link> Contributing </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Cloud Native Toolkit" class="md-nav__button md-logo" aria-label="Cloud Native Toolkit" data-md-component=logo> <img src=../images/cloudnativetoolkit.png alt=logo> </a> Cloud Native Toolkit </label> <div class=md-nav__source> <a href=https://github.com/cloud-native-toolkit/ibm-garage-developer-guide/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> cloud-native-toolkit/ibm-garage-developer-guide </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../index.html class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Overview <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Overview data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Overview </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../overview/overview.html class=md-nav__link> What is the Cloud Native Toolkit </a> </li> <li class=md-nav__item> <a href=../overview/whats-new.html class=md-nav__link> What's New </a> </li> <li class=md-nav__item> <a href=../overview/prerequisites.html class=md-nav__link> Prerequisites </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Install <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Install data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Install </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../setup/setup-options.html class=md-nav__link> Options for installing up Toolkit </a> </li> <li class=md-nav__item> <a href=../setup/fast-start.html class=md-nav__link> Fast Start install </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Learning the Toolkit <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Learning the Toolkit" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Learning the Toolkit </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1 type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1> Try it <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Try it" data-md-level=2> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Try it </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../resources/workshop/workshop.html class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../resources/workshop/setup.html class=md-nav__link> Setup Cluster </a> </li> <li class=md-nav__item> <a href=../resources/workshop/terminal.html class=md-nav__link> Setup Terminal </a> </li> <li class=md-nav__item> <a href=../resources/workshop/ci.html class=md-nav__link> Continuous integration </a> </li> <li class=md-nav__item> <a href=../resources/workshop/cd.html class=md-nav__link> Continuous delivery </a> </li> <li class=md-nav__item> <a href=../resources/workshop/inventory.html class=md-nav__link> 3-tier application </a> </li> <li class=md-nav__item> <a href=../resources/workshop/appmod.html class=md-nav__link> Application modernization </a> </li> <li class=md-nav__item> <a href=../resources/workshop/ai.html class=md-nav__link> Artificial Intelligence </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2 checked> <label class=md-nav__link for=__nav_4_2> Basics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Basics data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Basics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=fast-start.html class=md-nav__link> Learning Overview </a> </li> <li class=md-nav__item> <a href=dev-setup.html class=md-nav__link> Developer setup </a> </li> <li class=md-nav__item> <a href=fast-ci.html class=md-nav__link> Continuous Integration </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Continuous Delivery <span class="md-nav__icon md-icon"></span> </label> <a href=fast-cd.html class="md-nav__link md-nav__link--active"> Continuous Delivery </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#configuring-gitops-with-argo-cd class=md-nav__link> Configuring GitOps with Argo CD </a> <nav class=md-nav aria-label="Configuring GitOps with Argo CD"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#set-up-the-gitops-repo class=md-nav__link> Set up the GitOps repo </a> </li> <li class=md-nav__item> <a href=#hook-the-ci-pipeline-to-the-cd-pipeline class=md-nav__link> Hook the CI pipeline to the CD pipeline </a> </li> <li class=md-nav__item> <a href=#configure-release-namespaces class=md-nav__link> Configure Release namespaces </a> </li> <li class=md-nav__item> <a href=#register-the-gitops-repo-in-argocd class=md-nav__link> Register the GitOps repo in ArgoCD </a> </li> <li class=md-nav__item> <a href=#create-a-project-in-argo-cd class=md-nav__link> Create a project in Argo CD </a> </li> <li class=md-nav__item> <a href=#add-an-application-in-argo-cd-for-each-application-component class=md-nav__link> Add an application in Argo CD for each application component </a> </li> <li class=md-nav__item> <a href=#managing-secrets-in-argo-cd class=md-nav__link> Managing secrets in Argo CD </a> </li> <li class=md-nav__item> <a href=#configure-another-cluster-as-an-argo-cd-deployment-target class=md-nav__link> Configure another cluster as an Argo CD deployment target </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> In Depth <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="In Depth" data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> In Depth </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=in-depth.html class=md-nav__link> Cloud-Native Development with the Toolkit </a> </li> <li class=md-nav__item> <a href=devops.html class=md-nav__link> DevOps </a> </li> <li class=md-nav__item> <a href=testing.html class=md-nav__link> Automated Testing </a> </li> <li class=md-nav__item> <a href=analysis.html class=md-nav__link> Static Analysis </a> </li> <li class=md-nav__item> <a href=pipeline.html class=md-nav__link> Pipeline </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Adopting the Toolkit <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Adopting the Toolkit" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Adopting the Toolkit </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../adopting/adopting.html class=md-nav__link> Adopting the Toolkit </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2> Best Practices <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Best Practices" data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Best Practices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../adopting/best-practices/best-practices.html class=md-nav__link> Best Practices </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2_2 type=checkbox id=__nav_5_2_2> <label class=md-nav__link for=__nav_5_2_2> IBM Cloud setup <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Cloud setup" data-md-level=3> <label class=md-nav__title for=__nav_5_2_2> <span class="md-nav__icon md-icon"></span> IBM Cloud setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../adopting/best-practices/ibm-cloud-account/ibm-cloud-setup.html class=md-nav__link> IBM Cloud setup </a> </li> <li class=md-nav__item> <a href=../adopting/best-practices/ibm-cloud-account/plan-installation.html class=md-nav__link> Installation planning </a> </li> <li class=md-nav__item> <a href=../adopting/best-practices/ibm-cloud-account/configure-account.html class=md-nav__link> Access control </a> </li> <li class=md-nav__item> <a href=../adopting/best-practices/ibm-cloud-account/monitoring-logs.html class=md-nav__link> Monitoring and Logs </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../adopting/best-practices/registry.html class=md-nav__link> Container Registry </a> </li> <li class=md-nav__item> <a href=../adopting/best-practices/infrastructure-as-code.html class=md-nav__link> Infrastructure as Code </a> </li> <li class=md-nav__item> <a href=../adopting/best-practices/devops.html class=md-nav__link> DevOps </a> </li> <li class=md-nav__item> <a href=../adopting/best-practices/secret-management.html class=md-nav__link> Secret management </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_3 type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3> Advanced setup options <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Advanced setup options" data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Advanced setup options </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../adopting/setup/installing.html class=md-nav__link> Installation options </a> </li> <li class=md-nav__item> <a href=../adopting/setup/ibmcloud-setup.html class=md-nav__link> Configuring IBM Cloud based setup </a> </li> <li class=md-nav__item> <a href=../adopting/setup/ibmcloud-tile-cluster.html class=md-nav__link> Install IBM Cloud cluster from catalog </a> </li> <li class=md-nav__item> <a href=../adopting/setup/ibmcloud-iz-cluster.html class=md-nav__link> Install IBM Cloud cluster Iteration Zero </a> </li> <li class=md-nav__item> <a href=../adopting/setup/provision-cluster.html class=md-nav__link> Install cluster elsewhere </a> </li> <li class=md-nav__item> <a href=../adopting/setup/install-crc.html class=md-nav__link> Install CodeReady Containers </a> </li> <li class=md-nav__item> <a href=../adopting/setup/air-gapped-setup.html class=md-nav__link> Air-gapped setup </a> </li> <li class=md-nav__item> <a href=../adopting/setup/toolkit-install.html class=md-nav__link> Install toolkit to existing cluster </a> </li> <li class=md-nav__item> <a href=../adopting/setup/configureEnvironment.html class=md-nav__link> Post Install steps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_4 type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4> Customizing the Toolkit <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Customizing the Toolkit" data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Customizing the Toolkit </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../adopting/customize/customize.html class=md-nav__link> Customization overview </a> </li> <li class=md-nav__item> <a href=../adopting/customize/config-dashboard/dashboard.html class=md-nav__link> Customizing the dashboard </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5 type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5> Toolkit administration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Toolkit administration" data-md-level=2> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Toolkit administration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../adopting/admin/artifactory-setup.html class=md-nav__link> Artifactory setup </a> </li> <li class=md-nav__item> <a href=../adopting/admin/argo-cd-setup.html class=md-nav__link> Argo CD setup </a> </li> <li class=md-nav__item> <a href=../adopting/admin/sysdig-setup.html class=md-nav__link> Sysdig setup </a> </li> <li class=md-nav__item> <a href=../adopting/admin/cluster-config.html class=md-nav__link> cluster configuration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_6 type=checkbox id=__nav_5_6> <label class=md-nav__link for=__nav_5_6> Use Cases <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Use Cases" data-md-level=2> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> Use Cases </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../adopting/use-cases/applying.html class=md-nav__link> User cases </a> </li> <li class=md-nav__item> <a href=../adopting/use-cases/add-use-case.html class=md-nav__link> Add a new use case </a> </li> <li class=md-nav__item> <a href=../adopting/use-cases/operator/operator.html class=md-nav__link> Build an Operator </a> </li> <li class=md-nav__item> <a href=../adopting/use-cases/ace-pipeline/ace-pipeline.html class=md-nav__link> App Connect REST API workflow </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_6_5 type=checkbox id=__nav_5_6_5> <label class=md-nav__link for=__nav_5_6_5> GitOps <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=GitOps data-md-level=3> <label class=md-nav__title for=__nav_5_6_5> <span class="md-nav__icon md-icon"></span> GitOps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../adopting/use-cases/gitops/gitops-toolkit.html class=md-nav__link> Toolkit Install </a> </li> <li class=md-nav__item> <a href=../adopting/use-cases/gitops/gitops-ace.html class=md-nav__link> App Connect Install </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Reference data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../reference/reference.html class=md-nav__link> Reference </a> </li> <li class=md-nav__item> <a href=../reference/cli.html class=md-nav__link> Command Line Tool </a> </li> <li class=md-nav__item> <a href=../reference/dashboard.html class=md-nav__link> Developer Dashboard </a> </li> <li class=md-nav__item> <a href=../reference/git.html class=md-nav__link> Git repositories </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_5 type=checkbox id=__nav_6_5> <label class=md-nav__link for=__nav_6_5> Starter Kits <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Starter Kits" data-md-level=2> <label class=md-nav__title for=__nav_6_5> <span class="md-nav__icon md-icon"></span> Starter Kits </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../reference/starter-kit/starter-kit.html class=md-nav__link> Starter Kit overview </a> </li> <li class=md-nav__item> <a href=../reference/starter-kit/starter-kits.html class=md-nav__link> Available Starter Kits </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_6 type=checkbox id=__nav_6_6> <label class=md-nav__link for=__nav_6_6> Toolkit Components <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Toolkit Components" data-md-level=2> <label class=md-nav__title for=__nav_6_6> <span class="md-nav__icon md-icon"></span> Toolkit Components </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../reference/tools/tools.html class=md-nav__link> Toolkit components </a> </li> <li class=md-nav__item> <a href=../reference/tools/argocd.html class=md-nav__link> ArgoCD </a> </li> <li class=md-nav__item> <a href=../reference/tools/artifactory.html class=md-nav__link> Artifactory </a> </li> <li class=md-nav__item> <a href=../reference/tools/jenkins.html class=md-nav__link> Jenkins </a> </li> <li class=md-nav__item> <a href=../reference/tools/pact.html class=md-nav__link> PACT </a> </li> <li class=md-nav__item> <a href=../reference/tools/sonar-qube.html class=md-nav__link> SonarQube </a> </li> <li class=md-nav__item> <a href=../reference/tools/tekton.html class=md-nav__link> OpenShift Pipelines/Tekton </a> </li> <li class=md-nav__item> <a href=../reference/tools/ibm-cloud-container-registry.html class=md-nav__link> IBM Container Registry </a> </li> <li class=md-nav__item> <a href=../reference/tools/key-protect.html class=md-nav__link> IBM Key Protect </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_7 type=checkbox id=__nav_6_7> <label class=md-nav__link for=__nav_6_7> Pipeline Task Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Pipeline Task Reference" data-md-level=2> <label class=md-nav__title for=__nav_6_7> <span class="md-nav__icon md-icon"></span> Pipeline Task Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../reference/tasks/pipelines.html class=md-nav__link> Pipelines </a> </li> <li class=md-nav__item> <a href=../reference/tasks/placeholder.html class=md-nav__link> placeholder </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_8 type=checkbox id=__nav_6_8> <label class=md-nav__link for=__nav_6_8> Iteration Zero <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Iteration Zero" data-md-level=2> <label class=md-nav__title for=__nav_6_8> <span class="md-nav__icon md-icon"></span> Iteration Zero </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../reference/iteration-zero/iteration-zero.html class=md-nav__link> Iteration Zero </a> </li> <li class=md-nav__item> <a href=../reference/iteration-zero/terraform.html class=md-nav__link> Terraform modules </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Resources <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Resources data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../resources/resources.html class=md-nav__link> Additional resources </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7_2 type=checkbox id=__nav_7_2> <label class=md-nav__link for=__nav_7_2> IBM Cloud <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Cloud" data-md-level=2> <label class=md-nav__title for=__nav_7_2> <span class="md-nav__icon md-icon"></span> IBM Cloud </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../resources/ibm-cloud/ibm-cloud-roles.html class=md-nav__link> IBM Cloud roles </a> </li> <li class=md-nav__item> <a href=../resources/ibm-cloud/access-control.html class=md-nav__link> Access control </a> </li> <li class=md-nav__item> <a href=../resources/ibm-cloud/icc.html class=md-nav__link> ICC tool </a> </li> <li class=md-nav__item> <a href=../resources/ibm-cloud/cloud-shell.html class=md-nav__link> Cloud shell </a> </li> <li class=md-nav__item> <a href=../resources/ibm-cloud/crw.html class=md-nav__link> CodeReady Workspaces </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Contributing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Contributing data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Contributing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../contribute/governance.html class=md-nav__link> Governance </a> </li> <li class=md-nav__item> <a href=../contribute/contribute.html class=md-nav__link> Contribute </a> </li> <li class=md-nav__item> <a href=../contribute/documentation.html class=md-nav__link> Documentation </a> </li> <li class=md-nav__item> <a href=../contribute/automation.html class=md-nav__link> Build Automation </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#configuring-gitops-with-argo-cd class=md-nav__link> Configuring GitOps with Argo CD </a> <nav class=md-nav aria-label="Configuring GitOps with Argo CD"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#set-up-the-gitops-repo class=md-nav__link> Set up the GitOps repo </a> </li> <li class=md-nav__item> <a href=#hook-the-ci-pipeline-to-the-cd-pipeline class=md-nav__link> Hook the CI pipeline to the CD pipeline </a> </li> <li class=md-nav__item> <a href=#configure-release-namespaces class=md-nav__link> Configure Release namespaces </a> </li> <li class=md-nav__item> <a href=#register-the-gitops-repo-in-argocd class=md-nav__link> Register the GitOps repo in ArgoCD </a> </li> <li class=md-nav__item> <a href=#create-a-project-in-argo-cd class=md-nav__link> Create a project in Argo CD </a> </li> <li class=md-nav__item> <a href=#add-an-application-in-argo-cd-for-each-application-component class=md-nav__link> Add an application in Argo CD for each application component </a> </li> <li class=md-nav__item> <a href=#managing-secrets-in-argo-cd class=md-nav__link> Managing secrets in Argo CD </a> </li> <li class=md-nav__item> <a href=#configure-another-cluster-as-an-argo-cd-deployment-target class=md-nav__link> Configure another cluster as an Argo CD deployment target </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/cloud-native-toolkit/ibm-garage-developer-guide/edit/main/docs/learning/fast-cd.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=continuous-delivery-fast-start>Continuous Delivery - fast start<a class=headerlink href=#continuous-delivery-fast-start title="Permanent link">&para;</a></h1> <!--- cSpell:ignore grpc jsonnet ksonnet --> <p><a href=https://argoproj.github.io/argo-cd/ target=_blank>Argo CD</a> is a declarative, GitOps continuous delivery tool for Kubernetes. The deployment environment is a namespace in a container platform like Kubernetes or Red Hat OpenShift.</p> <p>Argo CD models a collection of applications as a project and uses a Git repository to store the application's desired state.</p> <p>Argo CD is flexible in the structure of the application configuration represented in the Git repository.</p> <p>Argo CD supports defining Kubernetes manifests in a number of ways:</p> <ul> <li>helm charts</li> <li>kustomize</li> <li>ksonnet</li> <li>jsonnet</li> <li>plain directory of yaml/json manifests</li> <li>custom plugins</li> </ul> <p>Argo CD compares the actual state of the application in the cluster with the desired state defined in Git and determines if they are out of sync. When it detects the environment is out of sync, Argo CD can be configured to either send out a notification to kick off a separate reconciliation process or Argo CD can automatically synchronize the environments to ensure they match.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Confidential information like passwords and security tokens should not be checked into the Git repository. <a href=#managing-secrets-in-argo-cd>Managing secrets in Argo CD</a> provides information on how to handle confidential information in the GitOps repo.</p> </div> <h2 id=configuring-gitops-with-argo-cd>Configuring GitOps with Argo CD<a class=headerlink href=#configuring-gitops-with-argo-cd title="Permanent link">&para;</a></h2> <p><strong>Terminology:</strong></p> <p>Argo CD uses a number of terms to refer to the components</p> <ul> <li> <p>Application - A deployable unit</p> <p>In the context of the environment, an application is one Helm chart that contains one container image that was produced by one CI pipeline. While Helm charts and images could certainly be combined to make more sophisticated applications in more advanced scenarios, we will be using this simple definition here.</p> </li> <li> <p>Project - A collection of applications that make up a solution</p> </li> </ul> <h3 id=set-up-the-gitops-repo>Set up the GitOps repo<a class=headerlink href=#set-up-the-gitops-repo title="Permanent link">&para;</a></h3> <div class="admonition todo"> <p class=admonition-title>Todo</p> <p>Is this better in the developer setup section?</p> </div> <p>Argo CD uses a Git repo to express the desired state of the Kubernetes environment. The basic setup uses one repository to represent one <a href=https://argoproj.github.io/argo-cd/user-guide/projects/ ><em>project</em></a>. Within that repository, each <a href=https://argoproj.github.io/argo-cd/operator-manual/declarative-setup/#applications><em>application</em></a> that makes up the project will be described in its own folder. The repository will also contain a branch for each destination (i.e. cluster and namespace) into which we want to deploy the applications.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>There is nothing special about a git repository used for git-ops. All that is required at a minimum is a hosted git repository that is accessible from by the Argo CD instance. The <a href=https://github.com/IBM/template-argocd-gitops>Argo CD Starter Kit</a> used in the following steps is optional and provides some application templates to help simplify some configuration activities.</p> </div> <p><a href=https://youtu.be/plK2C-efwW8 target=_blank title="GitOps with ArgoCD"><img alt='"GitOps with ArgoCD"' src=http://img.youtube.com/vi/plK2C-efwW8/0.jpg></a></p> <ol> <li> <p>Create a new repo from the <a href=https://github.com/IBM/template-argocd-gitops>Argo CD Starter Kit</a> <code>https://github.com/IBM/template-argocd-gitops/generate</code>. </p> <p>click <strong>Use this template</strong> - If you see a 404 error when you click on the link, you need to sign in to github.</p> </li> <li> <p>Clone the project to your machine</p> <div class=highlight><pre><span></span><code>git clone <span class=si>${</span><span class=nv>GIT_URL_GITOPS</span><span class=si>}</span>
</code></pre></div> </li> <li> <p>navigate into the directory</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=si>${</span><span class=nv>GIT_DIRECTORY</span><span class=si>}</span>
</code></pre></div> </li> <li> <p>Create and push test branch</p> <div class=highlight><pre><span></span><code>git checkout -b <span class=nb>test</span>
git push -u origin <span class=nb>test</span>
</code></pre></div> </li> </ol> <h3 id=hook-the-ci-pipeline-to-the-cd-pipeline>Hook the CI pipeline to the CD pipeline<a class=headerlink href=#hook-the-ci-pipeline-to-the-cd-pipeline title="Permanent link">&para;</a></h3> <p>The last stage in the CI pipeline updates a GitOps repository with the updated application metadata from the build. In order to do that, the CI pipeline needs to know which repository should be used and needs the credentials to push changes to that repository. As with other configuration within the pipeline, this is handled with config maps and secrets:</p> <ul> <li>A secret named <code>git-credentials</code> holds the credentials the CI pipeline uses to access all the repositories in the Git host (e.g. GitHub, GitLab, BitBucket, etc. If you used the <a href=../reference/cli.html>Toolkit CLI</a> to register the pipeline then this secret has already been created.</li> <li>A config map named <code>gitops-repo</code> holds the url and branch for the gitops repository.</li> </ul> <p>Fortunately the <a href=../reference/cli.html>Toolkit CLI</a> provides a <code>gitops</code> command to simplify this step. Information on how to use the command as well as the alternative manual steps can be found in the <a href=../reference/cli.html#gitops>Toolkit CLI gitops command</a> section.</p> <ol> <li> <p>Make sure to switch context to the project/namespace CI namespace</p> <div class=highlight><pre><span></span><code>oc project <span class=si>${</span><span class=nv>DEV_NAMESPACE</span><span class=si>}</span>
</code></pre></div> </li> <li> <p>Run the <code>gitops</code> command to create the config map and secret in the CI namespace</p> <div class=highlight><pre><span></span><code>igc gitops
</code></pre></div> </li> </ol> <div class="admonition note"> <p class=admonition-title>Note</p> <ul> <li>For the secret to be available to the CI pipeline, the secret needs to be created in the same namespace where the pipeline is running.</li> <li>The value provided for <code>branch</code> is the one the pipeline will use to when committing changes to trigger the CD pipeline.</li> </ul> </div> <p>As of v2.0.0 of the Tekton tasks and the Jenkins pipelines, the CI pipeline will create a folder and the initial configuration for an application deployment if it doesn't already exist. This means, there is no other manual configuration required to set up the repository.</p> <p>Now run a new Pipeline and make sure a directory for the application is created on the gitops git repository. This is required before configuring ArgoCD.</p> <h3 id=configure-release-namespaces>Configure Release namespaces<a class=headerlink href=#configure-release-namespaces title="Permanent link">&para;</a></h3> <p>ArgoCD will deploy the application into the "releases" namespace such as ${TEST_NAMESPACE} or ${STAGING_NAMESPACE}</p> <ol> <li> <p>Create a release namespace where ArgoCD will deploy the application</p> <div class=highlight><pre><span></span><code>oc new-project <span class=si>${</span><span class=nv>TEST_NAMESPACE</span><span class=si>}</span>
</code></pre></div> </li> </ol> <p>The release namespaces need pull secrets for the application container images to be pull.</p> <div class=tabbed-set data-tabs=1:3><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>OpenShift Image Registry</label><div class=tabbed-content> <p>If you are using the OpenShift Image Registry then you need to give permission to the services accounts in the "release" namespaces to be able to pull images from the "development" namespaces.</p> <ul> <li>Grant access to service accounts in the new <code>test</code> or <code>staging</code> namespace to pull the container image from the <code>dev</code> namespace</li> </ul> <div class=highlight><pre><span></span><code>oc policy add-role-to-group system:image-puller system:serviceaccounts:<span class=o>{</span>TEST_NAMESPACE<span class=o>}</span> -n <span class=o>{</span>DEV_NAMESPACE<span class=o>}</span>
</code></pre></div> </div> <input id=__tabbed_1_2 name=__tabbed_1 type=radio><label for=__tabbed_1_2>IBM Container Registry</label><div class=tabbed-content> <p>If you are using the IBM Container Registry then you need to copy the pull secret <code>all-icr-io</code> from the <code>default</code> namespace and then add this secret to the service account used by your application (ie <code>default</code> service account)</p> <ul> <li>Use the Toolkit CLI to copy the secret and setup the service account</li> </ul> <div class=highlight><pre><span></span><code>igc pull-secret <span class=si>${</span><span class=nv>TEST_NAMESPACE</span><span class=si>}</span> -t default -z default
</code></pre></div> </div> <input id=__tabbed_1_3 name=__tabbed_1 type=radio><label for=__tabbed_1_3>Other Container Registries</label><div class=tabbed-content> <p>If you are using an external image registry from a 3rd party provider like quay.io or dockerhub.io then you need to create the pull secret of type "docker-registry" and add it to the service account. Check the OpenShift Documentation <a href=https://docs.openshift.com/container-platform/4.6/openshift_images/managing_images/using-image-pull-secrets.html>Using pull secrets</a></p> </div> </div> <h3 id=register-the-gitops-repo-in-argocd>Register the GitOps repo in ArgoCD<a class=headerlink href=#register-the-gitops-repo-in-argocd title="Permanent link">&para;</a></h3> <p>Now that the repository has been created, we need to tell ArgoCD where it is.</p> <ul> <li> <p>Log into ArgoCD</p> </li> <li> <p>Click on the gear icon on the left menu to access the Settings options</p> <p><img alt="ArgoCD config" src=images/argocd-config.png></p> </li> <li> <p>Select the <code>Repositories</code> option</p> </li> <li> <p>Click either the <code>Connect Repo using HTTPS</code> or <code>Connect Repo using SSH</code> button at the top and provide the information for the GitOps repo you just created. For <code>HTTPS</code> you can use the access token you used when you ran <code>igc gitops</code></p> </li> </ul> <h3 id=create-a-project-in-argo-cd>Create a project in Argo CD<a class=headerlink href=#create-a-project-in-argo-cd title="Permanent link">&para;</a></h3> <p>In Argo CD terms, each deployable component is an application and applications are grouped into projects. Projects are not required for Argo CD to be able to deploy applications, but it helps to organize applications and provide some restrictions on what can be done for applications that make up a project.</p> <div class=tabbed-set data-tabs=2:3><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><label for=__tabbed_2_1>Argo CD UI</label><div class=tabbed-content> <ol> <li> <p>Log into the Argo CD user interface</p> </li> <li> <p>Click on the gear icon on the left menu to access the Settings options</p> <p><img alt="Argo CD config" src=images/argocd-config.png></p> </li> <li> <p>Select the Projects option</p> </li> <li> <p>Press the New Project button at the top of the page</p> </li> <li> <p>Specify the properties for the new project</p> <ul> <li>Name - Provide the name for the project</li> <li>Description - A brief description of the project</li> <li>Source - Press Add source and pick the Git repository from the list that was added previously</li> <li>Destinations<ul> <li>Add <code>https://kubernetes.default.svc</code> for the cluster url and <code>${TEST_NAMESPACE}</code> for the namespace</li> <li>Add <code>https://kubernetes.default.svc</code> for the cluster url and <code>${STAGING_NAMESPACE}</code> for the namespace</li> </ul> </li> <li>Press Create</li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Initially, the only cluster that is available is the one in which Argo CD is - <code>https://kubernetes.default.svc</code>. By adding the two destinations we have allowed the project to be deployed to both the <code>${TEST_NAMESPACE}</code> and <code>${STAGING_NAMESPACE}</code> namespaces within the current cluster.</p> </div> </li> </ol> </div> <input id=__tabbed_2_2 name=__tabbed_2 type=radio><label for=__tabbed_2_2>Argo CD CLI</label><div class=tabbed-content> <ol> <li> <p>Log in to the Argo CD CLI</p> <div class=highlight><pre><span></span><code>argocd login <span class=o>{</span>GRPC_INGRESS_HOST<span class=o>}</span> --grpc-web <span class=o>[</span>--sso<span class=o>]</span>
</code></pre></div> <p>where:</p> <ul> <li><code>GRPC_INGRESS_HOST</code> is the host name of the grpc endpoint. On Red Hat OpenShift this is the same as the UI host</li> <li><code>--sso</code> is an optional flag used when sso authentication is enabled. If not using SSO then you will be prompted for the username and password</li> </ul> <p>The grpc url and credentials can be retrieved from the <code>igc credentials</code> command</p> </li> <li> <p>Create the project</p> <div class=highlight><pre><span></span><code>argocd proj create <span class=o>{</span>PROJECT<span class=o>}</span> --dest <span class=o>{</span>CLUSTER_HOST<span class=o>}</span>,<span class=o>{</span>TEST_NAMESPACE<span class=o>}</span> --src <span class=o>{</span>GIT_REPO<span class=o>}</span>
</code></pre></div> <p>where:</p> <ul> <li><code>{PROJECT}</code> is the name you want to give to the project.</li> <li><code>{CLUSTER_HOST}</code> is the url for the cluster server to which the project applications can be deployed. Use <code>https://kubernetes.default.svc</code> to reference the same cluster where Argo CD has been deployed. <code>*</code> can also be used to allow deployments to any server.</li> <li><code>{TEST_NAMESPACE}</code> is the namespace in the cluster where the applications can be deployed. <code>*</code> can be used to indicate any namespace.</li> <li><code>{GIT_REPO}</code> is the url of the git repository where the gitops config will be located or <code>*</code> if you want to allow any.</li> </ul> <p><strong>Note:</strong> The <code>--dest</code> and <code>--src</code> arguments can be provided multiple times if there are multiple destinations and/or sources that should be configured for the project</p> </li> </ol> </div> <input id=__tabbed_2_3 name=__tabbed_2 type=radio><label for=__tabbed_2_3>Argo CD custom resource</label><div class=tabbed-content> <ol> <li> <p>Log in to the cluster from the command line</p> </li> <li> <p>Create a file named <code>project.yaml</code> with the following contents</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class=nt>kind</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">AppProject</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>PROJECT_NAME</span><span class="p p-Indicator">}</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=nt>sourceRepos</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=s>&#39;*&#39;</span>
<span class=nt>destinations</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>namespace</span><span class=p>:</span> <span class=s>&#39;*&#39;</span>
    <span class=nt>server</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">https://kubernetes.default.svc</span>
</code></pre></div> </li> </ol> <p>where:</p> <ul> <li> <p><code>{PROJECT NAME}</code> is the name of the project</p> </li> <li> <p>Apply the yaml to the cluster in the namespace where Argo CD has been deployed (e.g. <code>tools</code>)</p> <div class=highlight><pre><span></span><code>kubectl apply -f project.yaml -n tools
</code></pre></div> </li> </ul> </div> </div> <h3 id=add-an-application-in-argo-cd-for-each-application-component>Add an application in Argo CD for each application component<a class=headerlink href=#add-an-application-in-argo-cd-for-each-application-component title="Permanent link">&para;</a></h3> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Before continuing to setup ArgoCD, please verify that the CI Pipeline run created the directory for the application on the gitops git repository and the directory container the helm related files including <code>requirements.yaml</code></p> </div> <p>The last step in the process is to define the application(s) within Argo CD that should be managed. This consists of connecting the config within the Git repo to the cluster and namespace.</p> <div class=tabbed-set data-tabs=3:3><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><label for=__tabbed_3_1>Argo CD UI</label><div class=tabbed-content> <ol> <li> <p>Log into Argo CD user interface</p> </li> <li> <p>Press <code>New Application</code> and provide the following values:</p> <ul> <li><code>application name</code> - The name of the application. It is recommend to use the format of <code>{namespace}-{image name}</code></li> <li><code>project</code> - The ArgoCD project with which the application should be included</li> <li><code>sync-policy</code> - The manner with which Argo CD will use to manage the deployed artifacts. <code>Automatic</code> is recommended</li> <li><code>repository url</code> - The Git url where the configuration is stored (restricted to git urls configured in the Argo Project)</li> <li><code>revision</code> - The Git branch where the configuration for this instance is stored</li> <li><code>path</code> - The path within the repository where the application config is located (should be the application name)</li> <li><code>destination cluster</code> - The cluster url for the deployment</li> <li><code>destination namespace</code> - The namespace where the application should be deployed (restricted to namespaces configured in the Argo Project)</li> </ul> </li> <li> <p>Repeat that step for each application and each environment</p> </li> </ol> </div> <input id=__tabbed_3_2 name=__tabbed_3 type=radio><label for=__tabbed_3_2>Argo CD CLI</label><div class=tabbed-content> <ol> <li> <p>Log in to the Argo CD CLI</p> <div class=highlight><pre><span></span><code>argocd login <span class=o>{</span>GRPC_INGRESS_HOST<span class=o>}</span> --grpc-web <span class=o>[</span>--sso<span class=o>]</span>
</code></pre></div> <p>where:</p> <ul> <li><code>GRPC_INGRESS_HOST</code> is the host name of the grpc endpoint. On Red Hat OpenShift this is the same as the UI host</li> <li><code>--sso</code> is an optional flag used when sso authentication is enabled. If not using SSO then you will be prompted for the username and password</li> </ul> <p>The grpc url and credentials can be retrieved from the <code>igc credentials</code> command</p> </li> <li> <p>Create an application</p> <div class=highlight><pre><span></span><code>argocd app create <span class=o>{</span>APP_NAME<span class=o>}</span> <span class=se>\</span>
--project <span class=o>{</span>PROJECT<span class=o>}</span> <span class=se>\</span>
--repo <span class=o>{</span>GIT_REPO<span class=o>}</span> <span class=se>\</span>
--path <span class=o>{</span>APP_FOLDER<span class=o>}</span> <span class=se>\</span>
--dest-namespace <span class=o>{</span>NAMESPACE<span class=o>}</span> <span class=se>\</span>
--dest-server <span class=o>{</span>SERVER_URL<span class=o>}</span>
</code></pre></div> <p>where:</p> <ul> <li><code>{APP_NAME}</code> is the name you want to give the application</li> <li><code>{PROJECT}</code> is the name of the project created above or "default"</li> <li><code>{GIT_REPO}</code> is the url of the git repository where the gitops config is be located</li> <li><code>{APP_FOLDER}</code> is the path to the configuration for the application in the gitops repo</li> <li><code>{DEST_NAMESPACE}</code> is the target namespace in the cluster where the application will be deployed</li> <li><code>{SERVER_URL}</code> is the url of the cluster where the application will be deployed. Use <code>https://kubernetes.default.svc</code> to reference the same cluster where Argo CD has been deployed</li> </ul> </li> </ol> </div> <input id=__tabbed_3_3 name=__tabbed_3 type=radio><label for=__tabbed_3_3>Argo CD custom resource</label><div class=tabbed-content> <ol> <li> <p>Log in to the cluster from the command line</p> </li> <li> <p>Create a file named <code>application.yaml</code> with the following contents</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class=nt>kind</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>APPLICATION NAME</span><span class="p p-Indicator">}</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=nt>destination</span><span class=p>:</span>
    <span class=nt>namespace</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>TARGET NAMESPACE</span><span class="p p-Indicator">}</span>
    <span class=nt>server</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>TARGET CLUSTER</span><span class="p p-Indicator">}</span>
<span class=nt>project</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>PROJECT NAME</span><span class="p p-Indicator">}</span>
<span class=nt>source</span><span class=p>:</span>
    <span class=nt>path</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>APPLICATION PATH</span><span class="p p-Indicator">}</span>
    <span class=nt>repoURL</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>REPO URL</span><span class="p p-Indicator">}</span>
    <span class=nt>targetRevision</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>REPO BRANCH</span><span class="p p-Indicator">}</span>
    <span class=nt>helm</span><span class=p>:</span>
    <span class=nt>valueFiles</span><span class=p>:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">values.yaml</span>
<span class=nt>syncPolicy</span><span class=p>:</span>
    <span class=nt>automated</span><span class=p>:</span>
    <span class=nt>prune</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class=nt>selfHeal</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div> <p>where:</p> <ul> <li><code>{APPLICATION NAME}</code> is the name of the application</li> <li><code>{PROJECT NAME}</code> is the name of the project (the one created in the previous step or <code>default</code>)</li> <li><code>{TARGET NAMESPACE}</code> is the namespace where the application should be deployed</li> <li><code>{TARGET CLUSTER}</code> is the server api url for the cluster where the application should be deployed. Use <code>https://kubernetes.default.svc</code> for the same cluster where Argo CD has been deployed</li> <li><code>{APPLICATION PATH}</code> is the path to the folder where the secret template was created</li> <li><code>{REPO URL}</code> is the url to the git repository</li> <li><code>{REPO BRANCH}</code> is the branch in the git repository that contains the application configuration</li> </ul> </li> <li> <p>Apply the yaml to the cluster in the namespace where Argo CD has been deployed (e.g. <code>tools</code>)</p> <div class=highlight><pre><span></span><code>kubectl apply -f application.yaml -n tools
</code></pre></div> </li> </ol> </div> </div> <h3 id=managing-secrets-in-argo-cd>Managing secrets in Argo CD<a class=headerlink href=#managing-secrets-in-argo-cd title="Permanent link">&para;</a></h3> <p>The following provides the steps to handle protected information in a GitOps repository using the <a href=https://github.com/ibm-garage-cloud/argocd-plugin-key-protect>Argo CD Key Protect plugin</a>. The plugin takes yaml configuration as input, looks up the credentials in Key Protect, and generates a secret in the cluster from the results.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If Argo CD was installed via the Toolkit then the plugin should already be installed and ready to use. If not, the instructions for installing the plugin can be found in the <a href=https://github.com/ibm-garage-cloud/argocd-plugin-key-protect>plugin documentation</a>.</p> </div> <h4 id=prepare-the-key-protect-instance>Prepare the Key Protect instance<a class=headerlink href=#prepare-the-key-protect-instance title="Permanent link">&para;</a></h4> <p>As the name suggests, the <a href=https://github.com/ibm-garage-cloud/argocd-plugin-key-protect>Argo CD Key Protect plugin</a> leverages the capabilities of the Key Protect service to manage the protected information. The details for setting up and managing the Key Protect instance can be found in <a href=../reference/tools/key-protect.html>Secret management with Key Protect</a>. From those instructions you can find the information required for the subsequent steps.</p> <h4 id=create-the-secret-configuration>Create the secret configuration<a class=headerlink href=#create-the-secret-configuration title="Permanent link">&para;</a></h4> <p>The input to the plugin is a directory that contains one or more yaml "secret templates". In this case the "secret template" provides the structure of the desired secret with placeholders for the values that will be pulled from the key management system.</p> <ol> <li> <p>Create a directory to contain the secret configuration. The <a href=https://github.com/IBM/template-argocd-gitops>Argo CD Starter Kit</a> repository has a template in <code>templates/secrets-plugin</code> that can be copied as a starting point</p> </li> <li> <p>Update the values in the yaml file for the secret that will be created</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">keymanagement.ibm/v1</span>
<span class=nt>kind</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">SecretTemplate</span>
<span class=nt>metadata</span><span class=p>:</span>
  <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">mysecret</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>key-manager</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">key-protect</span>
    <span class=nt>key-protect/instanceId</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">instance-id</span>
    <span class=nt>key-protect/region</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">us-east</span>
<span class=nt>spec</span><span class=p>:</span>
  <span class=nt>labels</span><span class=p>:</span> <span class="p p-Indicator">{}</span>
  <span class=nt>annotations</span><span class=p>:</span> <span class="p p-Indicator">{}</span>
  <span class=nt>values</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">url</span>
      <span class=nt>value</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">https://ibm.com</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">username</span>
      <span class=nt>b64value</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">dGVhbS1jYXA=</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">password</span>
      <span class=nt>keyId</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">36397b07-d98d-4c0b-bd7a-d6c290163684</span>
</code></pre></div> <ul> <li> <p>The <code>metadata.annotations</code> value is optional.</p> <ul> <li><code>key-manager</code> - the only value supported currently is <code>key-protect</code></li> <li><code>key-protect/instanceId</code> - the instance id of the key protect instance. If not provided then the <code>instance-id</code> value from the <code>key-protect-access</code> secret will be used.</li> <li><code>key-protect/region</code> - the region where the key protect instance has been provisioned. If not provided then the <code>region</code> value from the <code>key-protect-access</code> secret will be used.</li> </ul> </li> <li> <p>The <code>metadata.name</code> value given will be used as the name for the Secret that will be generated.</p> </li> <li>The information in <code>spec.labels</code> and <code>spec.annotations</code> will be copied over as the <code>labels</code> and <code>annotations</code> in the Secret that is generated</li> <li> <p>The <code>spec.values</code> section contains the information that should be provided in the <code>data</code> section of the generated Secret. There are three possible ways the values can be provided:</p> <ul> <li><code>value</code> - the actual value can be provided directly as clear text. This would be appropriate for information that is not sensitive but is required in the secret</li> <li><code>b64value</code> - a base64 encoded value can be provided to the secret. This can be used for large values that might present formatting issues or for information that is not sensitive but that might be obfuscated a bit (like a username)</li> <li><code>keyId</code> - the id (not the name) of the Standard Key that has been stored in Key Protect. The value stored in Key Protect can be anything</li> </ul> </li> </ul> </li> <li> <p>Commit the changes to the GitOps repository</p> </li> </ol> <h4 id=add-the-secret-application-in-argo-cd>Add the secret application in Argo CD<a class=headerlink href=#add-the-secret-application-in-argo-cd title="Permanent link">&para;</a></h4> <p>Once the configuration has been added to the GitOps repository, Argo CD needs to be configured to deploy the secrets.</p> <div class=tabbed-set data-tabs=4:3><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><label for=__tabbed_4_1>Argo CD UI</label><div class=tabbed-content> <ol> <li> <p>Log into Argo CD user interface</p> </li> <li> <p>Press <code>New Application</code> and provide the following values:</p> <ul> <li><code>application name</code> - The name of the application. It is recommend to use the format of <code>{namespace}-{image name}</code></li> <li><code>project</code> - The project with which the application should be included</li> <li><code>sync-policy</code> - The manner with which Argo CD will use to manage the deployed artifacts. <code>Automatic</code> is recommended</li> <li><code>repository url</code> - The Git url where the configuration is stored</li> <li><code>revision</code> - The branch where the configuration for this instance is stored</li> <li><code>path</code> - The path within the repository where the application config is located (should be the application name)</li> <li><code>destination cluster</code> - The cluster url for the deployment</li> <li><code>destination namespace</code> - The namespace where the application should be deployed</li> <li><code>Plugin</code> - In the last section of the UI select <code>Plugin</code> from the dropdown <img alt="Argo CD plugin" src=images/argocd-plugin.png></li> <li><code>key-protect-secret</code> - Click in the name field and select <code>key-protect-secret</code> from the dropdown </li> </ul> <p><img alt="Argo CD key protect secret" src=images/argocd-key-protect-secret.png></p> </li> <li> <p>Repeat that step for each secret application and environment</p> </li> </ol> </div> <input id=__tabbed_4_2 name=__tabbed_4 type=radio><label for=__tabbed_4_2>Argo CD CLI</label><div class=tabbed-content> <ol> <li> <p>Log in to the Argo CD CLI</p> <div class=highlight><pre><span></span><code>argocd login <span class=o>{</span>GRPC_INGRESS_HOST<span class=o>}</span> --grpc-web <span class=o>[</span>--sso<span class=o>]</span>
</code></pre></div> <p>where:</p> <ul> <li><code>GRPC_INGRESS_HOST</code> is the host name of the grpc endpoint. On Red Hat OpenShift this is the same as the UI host</li> <li><code>--sso</code> is an optional flag used when SSO authentication is enabled. If not using SSO then you will be prompted for the username and password</li> </ul> <p>The grpc url and credentials can be retrieved from the <code>igc credentials</code> command</p> </li> <li> <p>Create an application</p> <div class=highlight><pre><span></span><code>argocd app create <span class=o>{</span>APP_NAME<span class=o>}</span> <span class=se>\</span>
--project <span class=o>{</span>PROJECT<span class=o>}</span> <span class=se>\</span>
--repo <span class=o>{</span>GIT_REPO<span class=o>}</span> <span class=se>\</span>
--path <span class=o>{</span>APP_FOLDER<span class=o>}</span> <span class=se>\</span>
--dest-namespace <span class=o>{</span>NAMESPACE<span class=o>}</span> <span class=se>\</span>
--dest-server <span class=o>{</span>SERVER_URL<span class=o>}</span> <span class=se>\</span>
--config-management-plugin key-protect-secret
</code></pre></div> <p>where:</p> <ul> <li><code>{APP_NAME}</code> is the name you want to give the application</li> <li><code>{PROJECT}</code> is the name of the project created above or "default"</li> <li><code>{GIT_REPO}</code> is the url of the git repository where the gitops config is be located</li> <li><code>{APP_FOLDER}</code> is the path to the configuration for the application in the gitops repo</li> <li><code>{DEST_NAMESPACE}</code> is the target namespace in the cluster where the application will be deployed</li> <li><code>{SERVER_URL}</code> is the url of the cluster where the application will be deployed. Use <code>https://kubernetes.default.svc</code> to reference the same cluster where Argo CD has been deployed</li> </ul> </li> </ol> </div> <input id=__tabbed_4_3 name=__tabbed_4 type=radio><label for=__tabbed_4_3>Argo CD custom resource</label><div class=tabbed-content> <ol> <li> <p>Log in to the cluster from the command line</p> </li> <li> <p>Create a file named <code>secret-application.yaml</code> with the following contents</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class=nt>kind</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>APPLICATION NAME</span><span class="p p-Indicator">}</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=nt>destination</span><span class=p>:</span>
    <span class=nt>namespace</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>TARGET NAMESPACE</span><span class="p p-Indicator">}</span>
    <span class=nt>server</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>TARGET CLUSTER</span><span class="p p-Indicator">}</span>
<span class=nt>project</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>PROJECT NAME</span><span class="p p-Indicator">}</span>
<span class=nt>source</span><span class=p>:</span>
    <span class=nt>path</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>APPLICATION PATH</span><span class="p p-Indicator">}</span>
    <span class=nt>repoURL</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>REPO URL</span><span class="p p-Indicator">}</span>
    <span class=nt>targetRevision</span><span class=p>:</span> <span class="p p-Indicator">{</span><span class=nv>REPO BRANCH</span><span class="p p-Indicator">}</span>
    <span class=nt>plugin</span><span class=p>:</span>
    <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">key-protect-secret</span>
<span class=nt>syncPolicy</span><span class=p>:</span>
    <span class=nt>automated</span><span class=p>:</span>
    <span class=nt>prune</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class=nt>selfHeal</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div> <p>where:</p> <ul> <li><code>{APPLICATION NAME}</code> is the name of the application</li> <li><code>{PROJECT NAME}</code> is the name of the project (the one created in the previous step or <code>default</code>)</li> <li><code>{TARGET NAMESPACE}</code> is the namespace where the application should be deployed</li> <li><code>{TARGET CLUSTER}</code> is the server api url for the cluster where the application should be deployed. Use <code>https://kubernetes.default.svc</code> for the same cluster where Argo CD has been deployed</li> <li><code>{APPLICATION PATH}</code> is the path to the folder where the secret template was created</li> <li><code>{REPO URL}</code> is the url to the git repository</li> <li><code>{REPO BRANCH}</code> is the branch in the git repository that contains the application configuration</li> </ul> </li> <li> <p>Apply the yaml to the cluster in the namespace where Argo CD has been deployed (e.g. <code>tools</code>)</p> <div class=highlight><pre><span></span><code>kubectl apply -f secret-application.yaml -n tools
</code></pre></div> </li> </ol> </div> </div> <h3 id=configure-another-cluster-as-an-argo-cd-deployment-target>Configure another cluster as an Argo CD deployment target<a class=headerlink href=#configure-another-cluster-as-an-argo-cd-deployment-target title="Permanent link">&para;</a></h3> <p>Argo CD supports deploying applications into clusters other than the one into which it has been installed. To do that, the target cluster must first be registered with Argo CD. After that, the cluster api server can be selected as a deployment target within an application configuration. The following describes the steps required to add another cluster as a deployment target:</p> <ol> <li> <p>Log in to the Argo CD CLI</p> <div class=highlight><pre><span></span><code>argocd login <span class=o>{</span>GRPC_INGRESS_HOST<span class=o>}</span> --grpc-web <span class=o>[</span>--sso<span class=o>]</span>
</code></pre></div> <p>where:</p> <ul> <li><code>GRPC_INGRESS_HOST</code> is the host name of the grpc endpoint. On Red Hat OpenShift this is the same as the UI host</li> <li><code>--sso</code> is an optional flag used when sso authentication is enabled. If not using SSO then you will be prompted for the username and password</li> </ul> <p>The grpc url and credentials can be retrieved from the <code>igc credentials</code> command</p> </li> <li> <p>Log into the target cluster from the command line</p> </li> <li> <p>Run the Argo CD command to list the available clusters</p> <div class=highlight><pre><span></span><code>argocd cluster add
</code></pre></div> <p>The currently selected cluster will be the one with the asterisk next to it. Copy the cluster id from the table</p> </li> <li> <p>Add the cluster to Argo CD</p> <div class=highlight><pre><span></span><code>argocd cluster add <span class=o>{</span>CLUSTER ID<span class=o>}</span>
</code></pre></div> <p>where:</p> <ul> <li><code>{CLUSTER ID}</code> is the id of the target cluster from the previous step</li> </ul> </li> <li> <p>Confirm the configuration by listing the known clusters</p> <div class=highlight><pre><span></span><code>argocd cluster list
</code></pre></div> </li> </ol> </article> </div> </div> <a href=# class="md-top md-icon" title="Back to top" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> </a> </main> <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class=md-footer> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-column> <div class=md-footer-text><a href=https://cloudnativetoolkit.dev/contribute/contribute.html>Contribute</a> to the Cloud-Native Toolkit</div> <div class=md-footer-text>Site licensed under <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ >CC BY-NC-SA 4.0</a></div> </div> <div class=md-footer-column> <div class=md-footer-text>Have questions? open an issue on <a href=https://github.com/cloud-native-toolkit/planning/issues/new/choose>GitHub</a>.</div> <!-- Copyright and theme information --> <div class=md-footer-text> Copyright  2021 Cloud-Native Toolkit </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.tabs", "navigation.instant", "navigation.tracking", "navigation.tabs.sticky", "navigation.top"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.d351de03.min.js", "version": null}</script> <script src=../assets/javascripts/bundle.a1609d9a.min.js></script> </body> </html>