{"componentChunkName":"component---src-pages-workshop-inventory-index-mdx","path":"/workshop/inventory/","result":{"pageContext":{"frontmatter":{"title":"Workshop - Deploy a 3 tier Microservice using React, Node.js, and Java"},"relativePagePath":"/workshop/inventory/index.mdx","titleType":"page","MdxNode":{"id":"aa670382-a887-5b52-b520-50d29832d27b","children":[],"parent":"54e2b821-8380-5d5a-b20f-bcd579cf9cf2","internal":{"content":"---\ntitle: Workshop - Deploy a 3 tier Microservice using React, Node.js, and Java\n---\n\nimport Globals from 'gatsby-theme-carbon/src/templates/Globals';\n\n<PageDescription>\n\nDeploy a 3 tier Microservice using React, Node.js, and Java\n\n</PageDescription>\n\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/gvuJi7qEZck\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n\n\n1. Prerequisites\n    - The instructor should [Setup Workshop Environment](/workshop/setup)\n    - The student should [Setup CLI and Terminal Shell](/workshop/terminal)\n\n1. Instructor will provide the following info:\n    - OpenShift Console URL (OCP_CONSOLE_URL)\n    - The username and password for OpenShift and Git Server (default values are user01, user02, etc.. for users and `password` for password).\n\n1. Set `TOOLKIT_USERNAME` environment variable.\n   If you are participation in a workshop replace `userdemo` with your assigned username (ex. `user01`).\n    ```bash\n    TOOLKIT_USERNAME=userdemo\n    ```\n\n1. Login to OpenShift using `oc`\n    - If using IBM Cloud cluster then login with your IBM account email and IAM API Key or Token by using the **Copy Login Command**\n        ![Login](../images/login.jpg)\n    - If using a cluster that was configured with the workshop scripts outside IBM Cloud then use respective assigned username (ex. `user01`), and the password is `password`\n    ```bash\n    oc login $OCP_URL -u $TOOLKIT_USERNAME -p password\n    ```\n\n1. Set `TOOLKIT_PROJECT` environment variable, \n   If you are participation in a workshop replace `projectdemo` based on your assigned username (ex. `project01`).\n    ```bash\n    TOOLKIT_PROJECT=projectdemo\n    ```\n\n1. Create a project/namespace using your project prefix, and `-dev` and suffix\n    ```\n    oc sync $TOOLKIT_PROJECT-dev\n    ```\n\n1. Fork Inventory Sample Application Java\n    - Open Developer Dashboard from the OpenShift Console\n    - Select Starter Kits\n    - Select **Inventory Service** (Java)\n    - Click Fork\n    - Login into GIT Sever using the provided username and password (ie `userdemo` and `password`)\n    - Click **Fork Repository**\n\n1. Setup environment variable `GIT_URL` for the git url using the value from previous step or as following\n    ```bash\n    GIT_REPO=inventory-management-svc-solution\n    GIT_URL=http://${TOOLKIT_USERNAME}:password@$(oc get route -n tools gogs --template='{{.spec.host}}')/${TOOLKIT_USERNAME}/${GIT_REPO}\n    echo GIT_URL=${GIT_URL}\n\n    ```\n\n1. Create a pipeline for the application\n    ```\n    oc pipeline --tekton ${GIT_URL}#master -p scan-image=false\n    ```\n    - Open the url to see the pipeline running in the OpenShift Console\n\n\n1. Fork Inventory Sample Application TypeScript\n    - Open Developer Dashboard from the OpenShift Console\n    - Select Starter Kits\n    - Select **Inventory BFF** (TypeScript)\n    - Click Fork\n    - Click **Fork Repository**\n\n\n1. Setup environment variable `GIT_URL` for the git url using the value from previous step or as following\n    ```bash\n    GIT_REPO=inventory-management-bff-solution\n    GIT_URL=http://${TOOLKIT_USERNAME}:password@$(oc get route -n tools gogs --template='{{.spec.host}}')/${TOOLKIT_USERNAME}/${GIT_REPO}\n    echo GIT_URL=${GIT_URL}\n\n    ```\n\n1. Create a pipeline for the application\n    ```\n    oc pipeline --tekton ${GIT_URL}#master -p scan-image=false\n    ```\n    - Open the url to see the pipeline running in the OpenShift Console\n\n1. Fork Inventory Sample Application React\n    - Open Developer Dashboard from the OpenShift Console\n    - Select Starter Kits\n    - Select **Inventory UI** (React)\n    - Click Fork\n    - Click **Fork Repository**\n\n1. Setup environment variable `GIT_URL` for the git url using the value from previous step or as following\n    ```bash\n    GIT_REPO=inventory-management-ui-solution\n    GIT_URL=http://${TOOLKIT_USERNAME}:password@$(oc get route -n tools gogs --template='{{.spec.host}}')/${TOOLKIT_USERNAME}/${GIT_REPO}\n    echo GIT_URL=${GIT_URL}\n\n    ```\n\n1. Create a pipeline for the application\n    ```\n    oc pipeline --tekton ${GIT_URL}#master -p scan-image=false\n    ```\n    - Open the url to see the pipeline running in the OpenShift Console\n\n\n1. Setup environment variable `GIT_OPS_URL` for the git url using the value from previous step or as following\n    ```bash\n    GIT_OPS_URL=http://${TOOLKIT_USERNAME}:password@$(oc get route -n tools gogs --template='{{.spec.host}}')/toolkit/gitops\n    echo GIT_OPS_URL=${GIT_OPS_URL}\n\n    ```\n\n1. Clone the git repository and change directory\n    ```bash\n    cd $HOME\n    git clone $GIT_OPS_URL gitops-inventory\n    cd gitops-inventory\n\n    ```\n\n1. Review the `qa` directory in the git repository, the directory might be empty if the 3 pipelines are not done yet.\n    ```bash\n    ls -l qa/${TOOLKIT_PROJECT}/\n    ```\n\n1. Review the `qa` directory in the git repository again\n    ```bash\n    ls -l qa/${TOOLKIT_PROJECT}/\n    ```\n    You should see 3 directories\n    ```bash\n    inventory-management-bff-solution/\n    inventory-management-svc-solution/\n    inventory-management-ui-solution/\n    ```\n\n1. **Note**:If you don't see the directories, this is a good time for a coffee break of 15 minutes until all 3 Pipeline Runs are done.\n\n\n1. Once the Pipeline Runs are done, try to list the directories again. Each directory contains their corresponding yaml manifest files (ie Helm Chart)\n    ```bash\n    ls -l qa/${TOOLKIT_PROJECT}/inventory-management-bff-solution\n    ls -l qa/${TOOLKIT_PROJECT}/inventory-management-svc-solution\n    ls -l qa/${TOOLKIT_PROJECT}/inventory-management-ui-solution\n\n    ```\n\n1. Promote the application to **QA** using git by creating a manifest yaml (ie Helm Chart) that leverage the Cloud Native Toolkit chart `argocd-config` to automate the creation of multiple ArgoCD Applications.\n    ```bash\n    git config --local user.email \"${TOOLKIT_USERNAME}@example.com\"\n    git config --local user.name \"${TOOLKIT_USERNAME}\"\n\n    cat > qa/${TOOLKIT_PROJECT}/Chart.yaml <<EOF\n    apiVersion: v2\n    version: 1.0.0\n    name: project-config-helm\n    description: Chart to configure ArgoCD with the inventory application\n\n    dependencies:\n    - name: argocd-config\n      version: 0.16.0\n      repository: https://cloud-native-toolkit.github.io/toolkit-charts\n    EOF\n\n    cat > qa/${TOOLKIT_PROJECT}/values.yaml <<EOF\n    global: {}\n    argocd-config:\n      repoUrl: \"http://gogs.tools:3000/toolkit/gitops.git\"\n      project: inventory-qa\n      applicationTargets:\n      - targetRevision: master\n        createNamespace: true\n        targetNamespace: ${TOOLKIT_PROJECT}-qa\n        applications:\n        - name: qa-${TOOLKIT_PROJECT}-inventory-svc\n          path: qa/${TOOLKIT_PROJECT}/inventory-management-svc-solution\n          type: helm\n        - name: qa-${TOOLKIT_PROJECT}-inventory-bff\n          path: qa/${TOOLKIT_PROJECT}/inventory-management-bff-solution\n          type: helm\n        - name: qa-${TOOLKIT_PROJECT}-inventory-ui\n          path: qa/${TOOLKIT_PROJECT}/inventory-management-ui-solution\n          type: helm\n    EOF\n\n    cat qa/${TOOLKIT_PROJECT}/values.yaml\n\n    git add .\n    git commit -m \"Add inventory application to gitops for project ${TOOLKIT_PROJECT}\"\n    git push -u origin master\n    \n    ```\n\n1. Register the Application in ArgoCD to deploy using GitOps\n    - Select ArgoCD from the Console Link and login using OpenShift login\n    - Click **NEW APP**\n    - Application Name: ${TOOLKIT_PROJECT}-inventory (ie project01-inventory)\n    - ArgoCD Project: `default`\n    - Sync Policy: `Automatic` (Check prune resources and self heal)\n    - Repository URL: `http://gogs.tools:3000/toolkit/gitops.git`\n    - Revision: `HEAD`\n    - Path: `qa/${TOOLKIT_PROJECT}` (ie qa/project01)\n    - Cluster: `in-cluster`\n    - Namespace: `tools`\n    - Click **CREATE**\n\n1. Review the Applications in ArgoCD\n    - Filter by Namespace `${TOOLKIT_PROJECT}-qa` (ie project01-qa)\n    - Review Application: inventory-management-svc-solution\n    - Review Application: inventory-management-bff-solution\n    - Review Application: inventory-management-ui-solution\n\n1. Review the Application in OpenShift\n    - Switch to Developer perspective\n    - Select **Topology** from the menu\n    - Switch to project `${TOOLKIT_PROJECT}-qa` (ie project01-qa)\n    - Open the Application from the JavaScript UI and make sure the stocks show up in the browser. Click on the route url on from the ui deployment, or the link on the circle.\n\n1. Now the Microservices application is ready for the development teams, in some cases each team will own and work with the git repository for the microservices, while the gitops git repository is own by the operations team.\n\n1. Congratulations you finished this activity, continue with another lab in the workshop\n","type":"Mdx","contentDigest":"c8e54bf4c4dc80de25fbddf9f35b5231","counter":1101,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Workshop - Deploy a 3 tier Microservice using React, Node.js, and Java"},"exports":{},"rawBody":"---\ntitle: Workshop - Deploy a 3 tier Microservice using React, Node.js, and Java\n---\n\nimport Globals from 'gatsby-theme-carbon/src/templates/Globals';\n\n<PageDescription>\n\nDeploy a 3 tier Microservice using React, Node.js, and Java\n\n</PageDescription>\n\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/gvuJi7qEZck\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n\n\n1. Prerequisites\n    - The instructor should [Setup Workshop Environment](/workshop/setup)\n    - The student should [Setup CLI and Terminal Shell](/workshop/terminal)\n\n1. Instructor will provide the following info:\n    - OpenShift Console URL (OCP_CONSOLE_URL)\n    - The username and password for OpenShift and Git Server (default values are user01, user02, etc.. for users and `password` for password).\n\n1. Set `TOOLKIT_USERNAME` environment variable.\n   If you are participation in a workshop replace `userdemo` with your assigned username (ex. `user01`).\n    ```bash\n    TOOLKIT_USERNAME=userdemo\n    ```\n\n1. Login to OpenShift using `oc`\n    - If using IBM Cloud cluster then login with your IBM account email and IAM API Key or Token by using the **Copy Login Command**\n        ![Login](../images/login.jpg)\n    - If using a cluster that was configured with the workshop scripts outside IBM Cloud then use respective assigned username (ex. `user01`), and the password is `password`\n    ```bash\n    oc login $OCP_URL -u $TOOLKIT_USERNAME -p password\n    ```\n\n1. Set `TOOLKIT_PROJECT` environment variable, \n   If you are participation in a workshop replace `projectdemo` based on your assigned username (ex. `project01`).\n    ```bash\n    TOOLKIT_PROJECT=projectdemo\n    ```\n\n1. Create a project/namespace using your project prefix, and `-dev` and suffix\n    ```\n    oc sync $TOOLKIT_PROJECT-dev\n    ```\n\n1. Fork Inventory Sample Application Java\n    - Open Developer Dashboard from the OpenShift Console\n    - Select Starter Kits\n    - Select **Inventory Service** (Java)\n    - Click Fork\n    - Login into GIT Sever using the provided username and password (ie `userdemo` and `password`)\n    - Click **Fork Repository**\n\n1. Setup environment variable `GIT_URL` for the git url using the value from previous step or as following\n    ```bash\n    GIT_REPO=inventory-management-svc-solution\n    GIT_URL=http://${TOOLKIT_USERNAME}:password@$(oc get route -n tools gogs --template='{{.spec.host}}')/${TOOLKIT_USERNAME}/${GIT_REPO}\n    echo GIT_URL=${GIT_URL}\n\n    ```\n\n1. Create a pipeline for the application\n    ```\n    oc pipeline --tekton ${GIT_URL}#master -p scan-image=false\n    ```\n    - Open the url to see the pipeline running in the OpenShift Console\n\n\n1. Fork Inventory Sample Application TypeScript\n    - Open Developer Dashboard from the OpenShift Console\n    - Select Starter Kits\n    - Select **Inventory BFF** (TypeScript)\n    - Click Fork\n    - Click **Fork Repository**\n\n\n1. Setup environment variable `GIT_URL` for the git url using the value from previous step or as following\n    ```bash\n    GIT_REPO=inventory-management-bff-solution\n    GIT_URL=http://${TOOLKIT_USERNAME}:password@$(oc get route -n tools gogs --template='{{.spec.host}}')/${TOOLKIT_USERNAME}/${GIT_REPO}\n    echo GIT_URL=${GIT_URL}\n\n    ```\n\n1. Create a pipeline for the application\n    ```\n    oc pipeline --tekton ${GIT_URL}#master -p scan-image=false\n    ```\n    - Open the url to see the pipeline running in the OpenShift Console\n\n1. Fork Inventory Sample Application React\n    - Open Developer Dashboard from the OpenShift Console\n    - Select Starter Kits\n    - Select **Inventory UI** (React)\n    - Click Fork\n    - Click **Fork Repository**\n\n1. Setup environment variable `GIT_URL` for the git url using the value from previous step or as following\n    ```bash\n    GIT_REPO=inventory-management-ui-solution\n    GIT_URL=http://${TOOLKIT_USERNAME}:password@$(oc get route -n tools gogs --template='{{.spec.host}}')/${TOOLKIT_USERNAME}/${GIT_REPO}\n    echo GIT_URL=${GIT_URL}\n\n    ```\n\n1. Create a pipeline for the application\n    ```\n    oc pipeline --tekton ${GIT_URL}#master -p scan-image=false\n    ```\n    - Open the url to see the pipeline running in the OpenShift Console\n\n\n1. Setup environment variable `GIT_OPS_URL` for the git url using the value from previous step or as following\n    ```bash\n    GIT_OPS_URL=http://${TOOLKIT_USERNAME}:password@$(oc get route -n tools gogs --template='{{.spec.host}}')/toolkit/gitops\n    echo GIT_OPS_URL=${GIT_OPS_URL}\n\n    ```\n\n1. Clone the git repository and change directory\n    ```bash\n    cd $HOME\n    git clone $GIT_OPS_URL gitops-inventory\n    cd gitops-inventory\n\n    ```\n\n1. Review the `qa` directory in the git repository, the directory might be empty if the 3 pipelines are not done yet.\n    ```bash\n    ls -l qa/${TOOLKIT_PROJECT}/\n    ```\n\n1. Review the `qa` directory in the git repository again\n    ```bash\n    ls -l qa/${TOOLKIT_PROJECT}/\n    ```\n    You should see 3 directories\n    ```bash\n    inventory-management-bff-solution/\n    inventory-management-svc-solution/\n    inventory-management-ui-solution/\n    ```\n\n1. **Note**:If you don't see the directories, this is a good time for a coffee break of 15 minutes until all 3 Pipeline Runs are done.\n\n\n1. Once the Pipeline Runs are done, try to list the directories again. Each directory contains their corresponding yaml manifest files (ie Helm Chart)\n    ```bash\n    ls -l qa/${TOOLKIT_PROJECT}/inventory-management-bff-solution\n    ls -l qa/${TOOLKIT_PROJECT}/inventory-management-svc-solution\n    ls -l qa/${TOOLKIT_PROJECT}/inventory-management-ui-solution\n\n    ```\n\n1. Promote the application to **QA** using git by creating a manifest yaml (ie Helm Chart) that leverage the Cloud Native Toolkit chart `argocd-config` to automate the creation of multiple ArgoCD Applications.\n    ```bash\n    git config --local user.email \"${TOOLKIT_USERNAME}@example.com\"\n    git config --local user.name \"${TOOLKIT_USERNAME}\"\n\n    cat > qa/${TOOLKIT_PROJECT}/Chart.yaml <<EOF\n    apiVersion: v2\n    version: 1.0.0\n    name: project-config-helm\n    description: Chart to configure ArgoCD with the inventory application\n\n    dependencies:\n    - name: argocd-config\n      version: 0.16.0\n      repository: https://cloud-native-toolkit.github.io/toolkit-charts\n    EOF\n\n    cat > qa/${TOOLKIT_PROJECT}/values.yaml <<EOF\n    global: {}\n    argocd-config:\n      repoUrl: \"http://gogs.tools:3000/toolkit/gitops.git\"\n      project: inventory-qa\n      applicationTargets:\n      - targetRevision: master\n        createNamespace: true\n        targetNamespace: ${TOOLKIT_PROJECT}-qa\n        applications:\n        - name: qa-${TOOLKIT_PROJECT}-inventory-svc\n          path: qa/${TOOLKIT_PROJECT}/inventory-management-svc-solution\n          type: helm\n        - name: qa-${TOOLKIT_PROJECT}-inventory-bff\n          path: qa/${TOOLKIT_PROJECT}/inventory-management-bff-solution\n          type: helm\n        - name: qa-${TOOLKIT_PROJECT}-inventory-ui\n          path: qa/${TOOLKIT_PROJECT}/inventory-management-ui-solution\n          type: helm\n    EOF\n\n    cat qa/${TOOLKIT_PROJECT}/values.yaml\n\n    git add .\n    git commit -m \"Add inventory application to gitops for project ${TOOLKIT_PROJECT}\"\n    git push -u origin master\n    \n    ```\n\n1. Register the Application in ArgoCD to deploy using GitOps\n    - Select ArgoCD from the Console Link and login using OpenShift login\n    - Click **NEW APP**\n    - Application Name: ${TOOLKIT_PROJECT}-inventory (ie project01-inventory)\n    - ArgoCD Project: `default`\n    - Sync Policy: `Automatic` (Check prune resources and self heal)\n    - Repository URL: `http://gogs.tools:3000/toolkit/gitops.git`\n    - Revision: `HEAD`\n    - Path: `qa/${TOOLKIT_PROJECT}` (ie qa/project01)\n    - Cluster: `in-cluster`\n    - Namespace: `tools`\n    - Click **CREATE**\n\n1. Review the Applications in ArgoCD\n    - Filter by Namespace `${TOOLKIT_PROJECT}-qa` (ie project01-qa)\n    - Review Application: inventory-management-svc-solution\n    - Review Application: inventory-management-bff-solution\n    - Review Application: inventory-management-ui-solution\n\n1. Review the Application in OpenShift\n    - Switch to Developer perspective\n    - Select **Topology** from the menu\n    - Switch to project `${TOOLKIT_PROJECT}-qa` (ie project01-qa)\n    - Open the Application from the JavaScript UI and make sure the stocks show up in the browser. Click on the route url on from the ui deployment, or the link on the circle.\n\n1. Now the Microservices application is ready for the development teams, in some cases each team will own and work with the git repository for the microservices, while the gitops git repository is own by the operations team.\n\n1. Congratulations you finished this activity, continue with another lab in the workshop\n","fileAbsolutePath":"/home/runner/work/ibm-garage-developer-guide/ibm-garage-developer-guide/src/pages/workshop/inventory/index.mdx"}}},"staticQueryHashes":["1054721580","1054721580","1317950067","1317950067","1364590287","2102389209","2102389209","223705900","3273249464","530240012","530240012","768070550"]}