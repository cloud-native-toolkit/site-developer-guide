(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{"013z":function(e,t,a){"use strict";var o=a("q1tI"),n=a.n(o),r=a("NmYn"),i=a.n(r),l=a("Wbzz"),p=a("Xrax"),b=a("k4MR"),c=a("TSYQ"),s=a.n(c),m=a("QH2O"),d=a.n(m),h=a("qKvR"),u=function(e){var t,a=e.title,o=e.theme,n=e.tabs,r=void 0===n?[]:n;return Object(h.b)("div",{className:s()(d.a.pageHeader,(t={},t[d.a.withTabs]=r.length,t[d.a.darkMode]="dark"===o,t))},Object(h.b)("div",{className:"bx--grid"},Object(h.b)("div",{className:"bx--row"},Object(h.b)("div",{className:"bx--col-lg-12"},Object(h.b)("h1",{id:"page-title",className:d.a.text},a)))))},g=a("BAC9"),O=function(e){var t=e.relativePagePath,a=e.repository,o=Object(l.useStaticQuery)("1364590287").site.siteMetadata.repository,n=a||o,r=n.baseUrl,i=n.subDirectory,p=r+"/edit/"+n.branch+i+"/src/pages"+t;return r?Object(h.b)("div",{className:"bx--row "+g.row},Object(h.b)("div",{className:"bx--col"},Object(h.b)("a",{className:g.link,href:p},"Edit this page on GitHub"))):null},j=a("FCXl"),N=a("9Hrx"),f=a("I8xM"),y=function(e){function t(){return e.apply(this,arguments)||this}return Object(N.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.tabs,a=e.slug,o=a.split("/").filter(Boolean).slice(-1)[0],n=t.map((function(e){var t,n=i()(e,{lower:!0,strict:!0}),r=n===o,p=new RegExp(o+"/?(#.*)?$"),b=a.replace(p,n);return Object(h.b)("li",{key:e,className:s()((t={},t[f.selectedItem]=r,t),f.listItem)},Object(h.b)(l.Link,{className:f.link,to:""+b},e))}));return Object(h.b)("div",{className:f.tabsContainer},Object(h.b)("div",{className:"bx--grid"},Object(h.b)("div",{className:"bx--row"},Object(h.b)("div",{className:"bx--col-lg-12 bx--col-no-gutter"},Object(h.b)("nav",null,Object(h.b)("ul",{className:f.list},n))))))},t}(n.a.Component),k=a("MjG9"),w=a("CzIb");t.a=function(e){var t=e.pageContext,a=e.children,o=e.location,n=e.Title,r=t.frontmatter,c=void 0===r?{}:r,s=t.relativePagePath,m=t.titleType,d=c.tabs,g=c.title,N=c.theme,f=c.description,v=c.keywords,A=Object(w.a)().interiorTheme,T=Object(l.useStaticQuery)("2456312558").site.pathPrefix,C=T?o.pathname.replace(T,""):o.pathname,x=d?C.split("/").filter(Boolean).slice(-1)[0]||i()(d[0],{lower:!0}):"",E=N||A;return Object(h.b)(b.a,{tabs:d,homepage:!1,theme:E,pageTitle:g,pageDescription:f,pageKeywords:v,titleType:m},Object(h.b)(u,{title:n?Object(h.b)(n,null):g,label:"label",tabs:d,theme:E}),d&&Object(h.b)(y,{slug:C,tabs:d,currentTab:x}),Object(h.b)(k.a,{padded:!0},a,Object(h.b)(O,{relativePagePath:s})),Object(h.b)(j.a,{pageContext:t,location:o,slug:C,tabs:d,currentTab:x}),Object(h.b)(p.a,null))}},BAC9:function(e,t,a){e.exports={bxTextTruncateEnd:"EditLink-module--bx--text-truncate--end--2pqje",bxTextTruncateFront:"EditLink-module--bx--text-truncate--front--3_lIE",link:"EditLink-module--link--1qzW3",row:"EditLink-module--row--1B9Gk"}},I8xM:function(e,t,a){e.exports={bxTextTruncateEnd:"PageTabs-module--bx--text-truncate--end--267NA",bxTextTruncateFront:"PageTabs-module--bx--text-truncate--front--3xEQF",tabsContainer:"PageTabs-module--tabs-container--8N4k0",list:"PageTabs-module--list--3eFQc",listItem:"PageTabs-module--list-item--nUmtD",link:"PageTabs-module--link--1mDJ1",selectedItem:"PageTabs-module--selected-item--YPVr3"}},QH2O:function(e,t,a){e.exports={bxTextTruncateEnd:"PageHeader-module--bx--text-truncate--end--mZWeX",bxTextTruncateFront:"PageHeader-module--bx--text-truncate--front--3zvrI",pageHeader:"PageHeader-module--page-header--3hIan",darkMode:"PageHeader-module--dark-mode--hBrwL",withTabs:"PageHeader-module--with-tabs--3nKxA",text:"PageHeader-module--text--o9LFq"}},aFaB:function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return p})),a.d(t,"default",(function(){return g}));var o=a("k1TG"),n=a("8o2o"),r=(a("q1tI"),a("7ljp")),i=a("013z"),l=a("T0C+"),p=(a("qKvR"),{}),b=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(r.b)("div",t)}},c=b("PageDescription"),s=b("InlineNotification"),m=b("Tabs"),d=b("Tab"),h={_frontmatter:p},u=i.a;function g(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(r.b)(u,Object(o.a)({},h,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)(c,{mdxType:"PageDescription"},Object(r.b)("p",null,"Set up DevOps pipelines to build an operator and operator catalog")),Object(r.b)("p",null,"The ",Object(r.b)(l.a,{name:"shortName",mdxType:"Globals"})," provides Tekton pipelines to automate the process to build and deploy operator-based\napplications. The operator pipeline supports Ansible, Go, and Helm-based operators that have been built using the Operator SDK.\nThe ",Object(r.b)(l.a,{name:"shortName",mdxType:"Globals"})," also provides a companion Tekton pipeline to build a custom Operator Lifecycle Manager catalog\nthat simplifies deployment of the operators to a cluster."),Object(r.b)("p",null,"The following steps will walk you through using the pipelines to build an operator and operator catalog and deploy them\nto a cluster."),Object(r.b)("h2",null,"Prerequisites"),Object(r.b)("h3",null,"Operator SDK"),Object(r.b)("p",null,"The Tekton pipeline for building operators requires that the operator has been created by at least v1.0.0 of the ",Object(r.b)("a",{href:"https://sdk.operatorframework.io/docs/",target:"_blank"},"Operator SDK"),"\nbut we recommend using the latest available (v1.3.0 at the time of this writing). The Operator SDK structure had a major\narchitectural change with v1.0.0 and continues to have significant improvements made with each release."),Object(r.b)("p",null,"If you do not have ",Object(r.b)("inlineCode",{parentName:"p"},"operator-sdk"),", follow the ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"https://sdk.operatorframework.io/docs/installation/"}),"installation instructions")," to\nget it."),Object(r.b)("h2",null,"(Optional) Create your operator"),Object(r.b)("p",null,"These steps will walk you through building a simple operator following the Operator SDK quick-start guide. You can choose\nbetween ",Object(r.b)("a",{href:"https://sdk.operatorframework.io/docs/building-operators/ansible/quickstart/",target:"_blank"},"Ansible")," "),Object(r.b)("a",{href:"https://sdk.operatorframework.io/docs/building-operators/golang/quickstart/",target:"_blank"},"Go"),", or",Object(r.b)("a",{href:"https://sdk.operatorframework.io/docs/building-operators/helm/quickstart/",target:"_blank"},"Helm")," quick start guides for the following example.",Object(r.b)(s,{mdxType:"InlineNotification"},Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Note:")," If you already have an operator built with v1.0.0+ of the Operator SDK then you can skip to the next section.")),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"Ansible")," operator quick start seems to be the simplest way to get up and running quickly and exercise the Tekton\npipelines. We’ve included the abbreviated steps from the ",Object(r.b)("a",{href:"https://sdk.operatorframework.io/docs/building-operators/ansible/quickstart/",target:"_blank"},"Ansible"),"\nquick start guide below."),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create a directory for your operator and change to that directory"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"mkdir memcached-operator\ncd memcached-operator\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Initialize the directory as a git repository"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"git init\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create the README.md and the initial commit"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),'echo "# memcached operator" > README.md\ngit add .\ngit commit -m "Initial commit"\n'))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Initialize the operator"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"operator-sdk init --plugins=ansible --domain=example.com\n")),Object(r.b)("p",{parentName:"li"},"where:"),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"--plugins")," can be either ",Object(r.b)("inlineCode",{parentName:"li"},"ansible"),", ",Object(r.b)("inlineCode",{parentName:"li"},"go"),", or ",Object(r.b)("inlineCode",{parentName:"li"},"helm"),". If ",Object(r.b)("inlineCode",{parentName:"li"},"--plugins")," is not provided then it defaults to ",Object(r.b)("inlineCode",{parentName:"li"},"go")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"--domain")," is the base domain name used for the Custom Resource Definition generated for the operator"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create an API for the operator"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"operator-sdk create api --group cache --version v1 --kind Memcached --generate-role\n")),Object(r.b)("p",{parentName:"li"},"where:"),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"--group")," is the api group for the CRD"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"--kind")," is the resource kind for the CRD"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"--version")," is the resource version for the CRD"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Commit the changes to the local git repository"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),'git add .\ngit commit -m "Initial operator version"\n'))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create a new git repository on GitHub and copy the url")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Push the local git repository to the remote GitHub repository"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"git remote add origin ${GIT_URL}\ngit push -u origin $(git rev-parse --abbrev-ref HEAD)\n")))),Object(r.b)("p",null,"At this point you have enough of a functioning operator to try out the Tekton operator pipeline. If you want to explore\nthe operator you have created and/or enhance its capabilities, there are more detailed instructions on the ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"https://sdk.operatorframework.io/docs/building-operators/"}),"operator sdk"),"\npage."),Object(r.b)("h2",null,"Register the operator pipeline"),Object(r.b)("p",null,"This step is similar to ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"../deploy-app"}),"deploying an application"),". "),Object(r.b)("h3",null,"1. Log into your Development Cluster from the command line"),Object(r.b)("p",null,"Before starting, make sure you have set up your ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"/getting-started/dev-tools-setup"}),"development tools"),"."),Object(r.b)(m,{mdxType:"Tabs"},Object(r.b)(d,{label:"Cluster managed by IBM Cloud",mdxType:"Tab"},Object(r.b)("p",null,"Log into the cluster with ",Object(r.b)("inlineCode",{parentName:"p"},"icc [cluster name|cluster nickname]"))),Object(r.b)(d,{label:"OpenShift cluster",mdxType:"Tab"},Object(r.b)("p",null,"Run ",Object(r.b)("inlineCode",{parentName:"p"},"oc login $SERVER -u $OCP_USERNAME -p $OCP_PASSWORD")))),Object(r.b)("p",null,"You should now be able to access the OpenShift console:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"oc console\n")),Object(r.b)(s,{kind:"info",mdxType:"InlineNotification"},Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"NOTE"),": If your workshop is on Code Ready Workspaces, follow the steps in ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"/getting-started/dev-env-setup#code-ready-workspace"}),"Code Ready Workspaces Setup")," before logging in to the cluster.\nThe remaining steps assume this step has already been performed. If you stop and then come back later it is a good idea to re-run this step again before proceeding")),Object(r.b)("h3",null,"2. Create the operator development namespace"),Object(r.b)("p",null,"Before getting started, the development namespace/project needs to be created and prepared for the DevOps pipelines.\nThis is something that would typically happen once at the beginning of a project when a development team is formed and\nassigned to the cluster."),Object(r.b)("p",null,"This step copies the common ",Object(r.b)("inlineCode",{parentName:"p"},"secrets")," and ",Object(r.b)("inlineCode",{parentName:"p"},"configMaps")," that contain the CI/CD configuration from the ",Object(r.b)("inlineCode",{parentName:"p"},"tools"),"\nnamespace into the development namespace/project. This enables the pipelines to reference the values easily for your\nproject."),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"oc sync ${OPERATOR_NAMESPACE}\n")),Object(r.b)("h3",null,"3. Register the operator in a DevOps Pipeline"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Start the process to create a pipeline using Tekton."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"oc pipeline --tekton\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"The first time a pipeline is registered in the namespace, the CLI will ask for a username and ",Object(r.b)("strong",{parentName:"p"},"Password"),"/",Object(r.b)("strong",{parentName:"p"},"Personal Access Token")," for the Git repository that will be stored in a secret named ",Object(r.b)("inlineCode",{parentName:"p"},"git-credentials"),"."),Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Username"),": Enter your GitHub user id"),Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Personal Access Token"),": Paste your GitHub personal access token")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"The CLI will attempt to determine the runtime of your repository. It should detect that it is an operator and prompt you to select ",Object(r.b)("inlineCode",{parentName:"p"},"ibm-operator")," pipeline or ",Object(r.b)("inlineCode",{parentName:"p"},"ibm-operator-catalog")," pipeline. Select ",Object(r.b)("inlineCode",{parentName:"p"},"ibm-operator")," pipeline.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"When registering a ",Object(r.b)("inlineCode",{parentName:"p"},"Tekton")," pipeline, the CLI also reads the available parameters from the pipeline and generates prompts for input. In this case, the option of scanning the built image for vulnerabilities is the only options. The scan is performed by the Vulnerability Advisor if you are using IBM Image Registry or by ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/aquasecurity/trivy"}),"Trivy")," if another image registry is used. This scan is performed in “scan” stage of pipeline after “img-release” stage."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"? scan-image: Enable the pipeline to scan the image for vulnerabilities?(Y/n)\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"To skip the scan, you have type “n” (No). Otherwise, type “y” (Yes) for performing Vulnerability Scanning on the image.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"After the pipeline has been created,the command will set up a webhook from the Git host to the pipeline event listener."),Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Note:")," if the webhook registration step fails, it is likely because the Git credentials are incorrect or do not have enough permission in the repository.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"When the command is completed it will present options for next steps. You can use the Tekton cli commands to inspect the pipeline run that has been created and tail the log and/or navigate to the provided url to see the pipeline running from the OpenShift console."))),Object(r.b)("h3",null,"4. View your application pipeline"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Open the OpenShift Web Console"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"oc console\n")),Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"OR")),Object(r.b)("span",Object(o.a)({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"345px"}}),"\n      ",Object(r.b)("span",Object(o.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"63.888888888888886%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACZ0lEQVQ4y31SO2ySURi9PIbGQpWUZ6G8yqOlPEJKo1PtRBAFGijyaO3gSHQ00USNbazRxLi4u+liYnQipaWduhgfq23dsAttgCgEFMrx3kshaNCbnJzvee53/+8nGHDa7Tbno0odH/aL+Lh/1MOngz4+tT9/Pcb7L0XsFSoggwSbrRPOr7YPcOHmW6w82UFyfQvLj7cRW80htZ5H9EEO8bVNJB9uIXQ3ixWaSz/Kg7BpWq0Wms1mD42fvzqC+T2cv/GGFuexuLrBEbmXpSI5LNzPcj++toGVp7u4/mwX6fXNwRP2n8NKG4XSCb6VOzikKJRa3GZcrAHPX7zGy3c7qNKHkUajgUwmg0AohFgshnA0ikuBAILBIEJXLmMxGsFy6iqWknGkT9FvX0sncFZ6Bkq5DHdu3wKp12o4p1RCTwgWKEYoxgwGqJQKaDRjkI6MgNDY/yHgzOpJ5UcVLquVi/nEYiQpIokEllIpPrHf74fb7eaQy+W8UUxrRCLRH2Bxh8MBclz+DpPZjAkaSAsEMFGIhoYgGR6GVCqFRCKBQqHg3G38GwJBZ0Kb3Q5So0+esFg6yX80DBIQCoU9oe5Fk5OTTLCKqakp6LRaeOizLs7Nwev18uTMzAymp6d53ufzYX5+vuez3OzsLGc7m6wrWCpX+KgymQxaKmqmz2dsNBqh0+m4zcCaXC4Xj+n1eoyOjtIlaHq1XJBeRKrVKi8aHx+HlS7HQDfMvhmLqdVqeDwe3mSz2bhAt06lUvFak8kEy+knYzlSr9cRDof5uKy5u1E2DfMnLFY4nU7uM/Tnuj6z2Yaj9B/+DemYHwrcnhh6AAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(r.b)("img",Object(o.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"IBM Cloud console",title:"IBM Cloud console",src:"/static/1ad3ab71a612e721d4955919cf7424d8/8e149/openshiftconsole.png",srcSet:["/static/1ad3ab71a612e721d4955919cf7424d8/7fc1e/openshiftconsole.png 288w","/static/1ad3ab71a612e721d4955919cf7424d8/8e149/openshiftconsole.png 345w"],sizes:"(max-width: 345px) 100vw, 345px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"From menu on the left switch to the ",Object(r.b)("strong",{parentName:"p"},"Developer")," mode")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Select ",Object(r.b)("em",{parentName:"p"},"dev")," project that was used for the application pipeline registration")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"In the left menu, select ",Object(r.b)("em",{parentName:"p"},"Pipelines")))),Object(r.b)("p",null,"You will see your application DevOps pipeline now starting to build and once completed will look like the image below."),Object(r.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(r.b)("span",Object(o.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"53.125%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABv0lEQVQoz42Ry27aQBiFZ9m8AjYGY+LYkMKqXfEeVdUHiQpPkJQki4hkn6JuKkFFUdp1d911F4VNCiYgoOALDsT4cjozlVBBtDDS0Vx0/m/O/ENeaBoOc3mIoghFURCLxSAIAuLx+AaJEKUEFFWDTuuYX1VV6JkMDrLPIacUEP0wj1T6AJKsoFr9gG63j1arhXa7ja7RhWEY6HQ6/5VBvfc/vuPn3S2IqmWRTKv05hQ+Nuown6YYj8bo9/twpjY8z8PWEYWwv9URDTsgiqpDpgkFSUat0cQ8AhxnCtd1MZvN4C08BEGwVT7lBlRkX8twoJigwE+fYTlzns40zdUQUbQyr59FFBqFIQNmlwlvvnzlBm+xgPvowrRM2LaNsTmmqR0+W3TPzpks28LEnMB2bPi+z2tJUlE5UJLTuH5fxcnpMY7eHtG0NVhTi0MeBg8c3Bv2+H74a4jBaMDXvUGPg5dABmPQ1L6G8vkZ9JwGQgiKxSI3hEGIXQd7+grw3XkZ+Zc57D3bQ6lU4ibW8JVebdDf/VwCmSpXV3j95hUKhQIuKpd/EtJG/wu0CcyBLJ0gJdFo3uBxwT7FX/vFnV+N33Szu9Gb+N/QAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(r.b)("img",Object(o.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"OpenShift",title:"OpenShift",src:"/static/bc2fdf9ded3491d12c0b10ab5584a164/3cbba/tektonpipeline.png",srcSet:["/static/bc2fdf9ded3491d12c0b10ab5584a164/7fc1e/tektonpipeline.png 288w","/static/bc2fdf9ded3491d12c0b10ab5584a164/a5df1/tektonpipeline.png 576w","/static/bc2fdf9ded3491d12c0b10ab5584a164/3cbba/tektonpipeline.png 1152w","/static/bc2fdf9ded3491d12c0b10ab5584a164/0b124/tektonpipeline.png 1728w","/static/bc2fdf9ded3491d12c0b10ab5584a164/4ea69/tektonpipeline.png 2304w","/static/bc2fdf9ded3491d12c0b10ab5584a164/df13e/tektonpipeline.png 2720w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(r.b)("h2",null,"Register the operator catalog pipeline"),Object(r.b)("p",null,"The operator catalog repository is a simple repo used to keep track of the operator bundles\nthat will be packaged together in the catalog. Even though you may start with one operator, it\nis assumed that ultimately multiple operators will be managed together in one catalog."),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Open the ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/ibm-garage-cloud/template-operator-catalog"}),"operator catalog template repository")," and\ncreate a repository for the operator catalog using the template")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Copy the repository url")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create/connect to the project for the operator development. This does not need to be the same one used for the operator build."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"oc sync ${OPERATOR_NAMESPACE}\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Register the pipeline for the operator catalog"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"oc pipeline --tekton ${GIT_URL}\n")))),Object(r.b)("h2",null,"Register the catalog repository with the operator pipeline"),Object(r.b)("p",null,"The last step of the operator pipeline will update the operator catalog repository with the new version of the\noperator bundle that was created. This update will trigger the creation of a new version of the catalog."),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Change to the project where the operator pipeline was registered"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"oc project ${OPERATOR_NAMESPACE}\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Change the directory to the local clone of your operator catalog repository")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Register the url for the operator catalog repository for the operator pipeline"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"igc git-secret olm-catalog-repo\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Kick off the operator pipeline again to update the operator catalog repo"))),Object(r.b)("h2",null,"Configure the GitOps repo"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"If you don’t already have one, create a GitOps repo from the ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/IBM/template-argocd-gitops"}),"gitops template")," template")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Clone the GitOps repo to the local machine"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"git clone ${GIT_URL}\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Change the directory to the cloned GitOps repo")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Change to the project where the operator catalog pipeline was registered"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"oc project ${OPERATOR_NAMESPACE}\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Register the GitOps repo url"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-shell"}),"oc gitops\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Trigger the operator catalog pipeline build to register the catalog source in the GitOps repo"))))}g.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-getting-started-day-1-build-operator-index-mdx-744a5a06fb33c3391885.js.map